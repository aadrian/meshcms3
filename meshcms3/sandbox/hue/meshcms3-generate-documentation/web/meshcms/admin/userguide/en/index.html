<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>MeshCMS User Guide</title><link href="html.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.73.2" name="generator"><meta name="description" content="MeshCMS is a simple content management system written in Java. This guide illustrates the most common operations that MeshCMS users will need to learn, from installation to daily usage."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="N10001"></a>MeshCMS User Guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Luciano</span> <span class="surname">Vernaschi</span></h3></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>MeshCMS is a simple content management system written in Java.
      This guide illustrates the most common operations that MeshCMS users
      will need to learn, from installation to daily usage.</p></div></div></div><hr></div><div class="toc"><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#install">2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#install_basic">1. Basic Procedures</a></span></dt><dt><span class="section"><a href="#charsets">2. Choosing a Charset</a></span></dt><dt><span class="section"><a href="#upgrade">3. Upgrade</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basic_concepts">3. Basic Concepts</a></span></dt><dd><dl><dt><span class="section"><a href="#site_map">1. The Site Map</a></span></dt><dt><span class="section"><a href="#external_tools">2. External Documents and Tools</a></span></dt><dt><span class="section"><a href="#multiple_sites">3. Serving multiple sites from a single installation</a></span></dt><dd><dl><dt><span class="section"><a href="#main_and_virtual_sites">3.1. Main site and virtual sites</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#common_tasks">4. Common Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#create_theme">1. Create a Theme</a></span></dt><dd><dl><dt><span class="section"><a href="#theme_main_file">1.1. The Theme Main File</a></span></dt></dl></dd><dt><span class="section"><a href="#edit_page">2. Edit a Page</a></span></dt><dt><span class="section"><a href="#create_new_page">3. Create a New Page</a></span></dt></dl></dd><dt><span class="chapter"><a href="#control_panel">5. Control Panel</a></span></dt><dd><dl><dt><span class="section"><a href="#page_manager">1. Page Manager</a></span></dt><dt><span class="section"><a href="#configure">2. Configure</a></span></dt><dt><span class="section"><a href="#edit_profile">3. Edit Profile</a></span></dt><dt><span class="section"><a href="#new_user">4. New User</a></span></dt><dt><span class="section"><a href="#file_manager">5. File Manager</a></span></dt><dd><dl><dt><span class="section"><a href="#upload">5.1. Upload</a></span></dt><dt><span class="section"><a href="#unzip">5.2. Unzip</a></span></dt></dl></dd><dt><span class="section"><a href="#static_export">6. Static Export</a></span></dt><dt><span class="section"><a href="#site_manager">7. Site Manager</a></span></dt></dl></dd><dt><span class="chapter"><a href="#modules">6. Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#standard_modules">1. Standard Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#module_audio_player">1.1. Audio Player</a></span></dt><dt><span class="section"><a href="#module_blog">1.2. Blog</a></span></dt><dt><span class="section"><a href="#module_blog_calendar">1.3. Blog Calendar</a></span></dt><dt><span class="section"><a href="#module_blog_tag_list">1.4. Blog Tag List</a></span></dt><dt><span class="section"><a href="#module_chat">1.5. Chat</a></span></dt><dt><span class="section"><a href="#module_comments">1.6. Comments</a></span></dt><dt><span class="section"><a href="#module_diary">1.7. Diary</a></span></dt><dt><span class="section"><a href="#module_downloads">1.8. Downloads</a></span></dt><dt><span class="section"><a href="#module_embed">1.9. Embed</a></span></dt><dt><span class="section"><a href="#module_frame">1.10. Frame</a></span></dt><dt><span class="section"><a href="#module_gallery">1.11. Gallery</a></span></dt><dt><span class="section"><a href="#module_headlines">1.12. Headlines</a></span></dt><dt><span class="section"><a href="#module_include">1.13. Include</a></span></dt><dt><span class="section"><a href="#module_include_as_text">1.14. Include As Text</a></span></dt><dt><span class="section"><a href="#module_latest_changes">1.15. Latest Changes</a></span></dt><dt><span class="section"><a href="#module_list_pages">1.16. List Pages</a></span></dt><dt><span class="section"><a href="#module_mail">1.17. Mail</a></span></dt><dt><span class="section"><a href="#module_most_visited">1.18. Most Visited</a></span></dt><dt><span class="section"><a href="#module_parse">1.19. Parse</a></span></dt><dt><span class="section"><a href="#module_site_map">1.20. Site Map</a></span></dt><dt><span class="section"><a href="#module_video_player">1.21. Video Player</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#tag_library">7. Tag Library</a></span></dt><dd><dl><dt><span class="section"><a href="#tags_mandatory">1. Mandatory Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_editor">1.1. editor</a></span></dt><dt><span class="section"><a href="#tag_pagehead">1.2. pagehead</a></span></dt><dt><span class="section"><a href="#tag_pagebody">1.3. pagebody</a></span></dt></dl></dd><dt><span class="section"><a href="#tags_page_design">2. Page Design Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_setlocale">2.1. setlocale</a></span></dt><dt><span class="section"><a href="#tag_defaultcss">2.2. defaultcss</a></span></dt><dt><span class="section"><a href="#tag_contextpath">2.3. contextpath</a></span></dt><dt><span class="section"><a href="#tag_themepath">2.4. themepath</a></span></dt><dt><span class="section"><a href="#tag_adminpath">2.5. adminpath</a></span></dt><dt><span class="section"><a href="#tag_searchfile">2.6. searchfile</a></span></dt></dl></dd><dt><span class="section"><a href="#tags_page_elements">3. Page Elements Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_pagetitle">3.1. pagetitle</a></span></dt><dt><span class="section"><a href="#tag_module">3.2. module</a></span></dt><dt><span class="section"><a href="#tag_moduletitle">3.3. moduletitle</a></span></dt><dt><span class="section"><a href="#tag_adminmenu">3.4. adminmenu</a></span></dt><dt><span class="section"><a href="#tag_mailform">3.5. mailform</a></span></dt></dl></dd><dt><span class="section"><a href="#tags_navigation">4. Navigation Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_listmenu">4.1. listmenu</a></span></dt><dt><span class="section"><a href="#tag_alibmenu">4.2. alibmenu</a></span></dt><dt><span class="section"><a href="#tag_simplemenu">4.3. simplemenu</a></span></dt><dt><span class="section"><a href="#tag_tigramenu">4.4. tigramenu</a></span></dt><dt><span class="section"><a href="#tag_breadcrumbs">4.5. breadcrumbs</a></span></dt><dt><span class="section"><a href="#tag_links">4.6. links</a></span></dt><dt><span class="section"><a href="#tag_langmenu">4.7. langmenu</a></span></dt></dl></dd><dt><span class="section"><a href="#tags_information">5. Information Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_info">5.1. info</a></span></dt><dt><span class="section"><a href="#tag_user">5.2. user</a></span></dt><dt><span class="section"><a href="#tag_lastmodified">5.3. lastmodified</a></span></dt></dl></dd><dt><span class="section"><a href="#tags_conditional">6. Conditional Tags</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_iflang">6.1. iflang</a></span></dt><dt><span class="section"><a href="#tag_ifuser">6.2. ifuser, ifnotuser</a></span></dt><dt><span class="section"><a href="#tag_ifediting">6.3. ifediting, ifnotediting</a></span></dt><dt><span class="section"><a href="#tag_ifmodule">6.4. ifmodule, ifnotmodule</a></span></dt><dt><span class="section"><a href="#tag_ifmailform">6.5. ifmailform, ifnotmailform</a></span></dt><dt><span class="section"><a href="#tag_ifindexed">6.6. ifindexed, ifnotindexed</a></span></dt><dt><span class="section"><a href="#tag_ifadminpage">6.7. ifadminpage, ifnotadminpage</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#N10EE0">8. Tips</a></span></dt><dd><dl><dt><span class="section"><a href="#tinymce_config">1. TinyMCE configuration</a></span></dt><dt><span class="section"><a href="#multilingual">2. Multilingual sites</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div></div><p>MeshCMS is an online editing system written in Java. It provides a
    set of features usually included in a CMS, but it uses a more traditional
    approach: pages are stored in regular HTML files and all additional
    features are file-based.</p><p>MeshCMS is available under the <a class="ulink" href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL license</a>. It allows
    some different usage approaches:</p><div class="itemizedlist"><ul type="disc"><li><p>it can be used as a simple, basic CMS. The user interface allows
        to edit pages visually, add and delete pages and do other basic tasks.
        This kind of approach should be easy enough for everyone;</p></li><li><p>more experienced users can create complex themes and modules to
        fulfill specific needs. MeshCMS offers many convenience classes and
        methods, and it allows to create JSP pages that will be added to the
        site map just like plain HTML pages;</p></li><li><p>since MeshCMS uses plain files and supports the standard
        SiteMesh configuration, many external Java applications can be
        integrated quite easily.</p></li></ul></div><p>Main features are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>file-based</strong></span> - no database
        needed;</p></li><li><p><span class="bold"><strong>easy to install</strong></span> - deploy
        meshcms.war and you're done (tested on Tomcat and Jetty);</p></li><li><p><span class="bold"><strong>multi-site support</strong></span> - multiple
        sites can be served with a single installation on a single
        context;</p></li><li><p><span class="bold"><strong>compatible with other editors</strong></span> -
        since it is file-based, you can edit your files with other programs if
        you want, then upload them as usual;</p></li><li><p><span class="bold"><strong>search engine friendly</strong></span> - due to
        its file-based nature, sites made with MeshCMS get pretty URLs by
        default, have a clear site map and are easily indexed by search
        engines;</p></li><li><p><span class="bold"><strong>wysiwyg editor included</strong></span> - uses
        <a class="ulink" href="http://tinymce.moxiecode.com/" target="_top">TinyMCE</a>;</p></li><li><p><span class="bold"><strong>file manager</strong></span> with image
        thumbnails, file operations, clipboard, upload, download, unzip and
        other functions - can also be used from within the wysiwyg editor to
        select links and images;</p></li><li><p>support for <span class="bold"><strong>themes</strong></span> - uses
        <a class="ulink" href="http://www.opensymphony.com/sitemesh/" target="_top">SiteMesh</a> as
        engine;</p></li><li><p>support for <span class="bold"><strong>modules</strong></span> to create
        commonly used components automatically - some module templates are
        provided (image gallery, mail form, download list, site map and
        others);</p></li><li><p><span class="bold"><strong>tag library</strong></span> to create new
        themes easily - menus and other common components are created
        automatically.</p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="install"></a>Chapter&nbsp;2.&nbsp;Installation</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_basic"></a>1.&nbsp;Basic Procedures</h2></div></div></div><p>If you want to try MeshCMS, the simplest way to get started is to
      copy <code class="filename">meshcms.war</code> or
      <code class="filename">samples.war</code> into the webapps directory of your
      application server (e.g. <a class="ulink" href="http://jakarta.apache.org/tomcat/" target="_top">Tomcat</a> or <a class="ulink" href="http://jetty.mortbay.org/" target="_top">Jetty</a>) and open
      <span class="emphasis"><em>http://localhost:8080/meshcms/</em></span> or
      <span class="emphasis"><em>http://localhost:8080/samples/</em></span>.</p><p>If you want to deploy a website, you will have to configure a
      virtual host for it as usual. There is nothing special in the setup of
      MeshCMS, so please refer to the documentation of your application server
      to choose the configuration options that best suit your needs.</p><p>MeshCMS is able to create thumbnails of images, so you need to
      provide an environment that allows image processing. On some systems you
      might need to add the <code class="option">-Djava.awt.headless=true</code> option
      to the Java VM that runs the Servlet container.</p><p>Starting from version 3.0, MeshCMS allows to serve multiple sites
      from within a single context. If you want to do this, you should
      configure the context to accept all domains that you want to host.
      Here's a simple example of <code class="filename">server.xml</code> file for
      Tomcat 5.5 that accepts all domain names:</p><pre class="programlisting">&lt;Server port="8005" shutdown="SHUTDOWN"&gt;
  &lt;Service name="Catalina"&gt;
    &lt;Connector port="8080" /&gt;

    &lt;Engine name="Catalina" defaultHost="localhost"&gt;
      &lt;Host name="localhost" appBase="/usr/local/tomcat/webapps"&gt;
        &lt;Context path="" docBase="ROOT" /&gt;
      &lt;/Host&gt;
    &lt;/Engine&gt;
  &lt;/Service&gt;
&lt;/Server&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><code class="option">ROOT</code> is the recommended name for the root
        context in a Tomcat host.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charsets"></a>2.&nbsp;Choosing a Charset</h2></div></div></div><p>MeshCMS is file-based, so it needs to pick up a charset to read
      and write files. Files are written by MeshCMS itself, but they are read
      by the servlet container (e.g. Tomcat) and processed by SiteMesh. For
      this reason, MeshCMS will use the system charset to ensure
      compatibility. If the charset encoding of the platform is not good for
      you, you can override it using the
      <code class="code">-Dfile.encoding=<em class="replaceable"><code>charsetname</code></em></code>
      option in the command that launches the Java VM to run the servlet
      container.</p><p>MeshCMS is developed on UTF-8 and ISO-8859-1 machines, but many
      users have different charsets and use them successfully.</p><p>A complete charset like UTF-8 is always preferable, even if you
      plan to use English characters only: the default charset is used
      extensively across all the CMS, even for mail messages sent through mail
      forms. If someone sends you a message in another language, it would be
      unreadable since the browser will translate all unknown characters to
      HTML entities.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>3.&nbsp;Upgrade</h2></div></div></div><p>Starting from version 3.0, MeshCMS is composed of two directories:
      <code class="filename">/meshcms/admin</code> and <code class="filename">/WEB-INF</code>.
      To perform an upgrade, you should delete the current versions of those
      directories and use the new ones. Be careful not to delete the whole
      <code class="filename">/meshcms</code> directory, but just the
      <code class="filename">admin</code> subdirectory.</p><p>This upgrade strategy works fine in case of a simple usage of
      MeshCMS. In other cases the upgrade process can be harder. You probably
      won't modify the contents of the <code class="filename">/meshcms/admin</code>
      directory, but the <code class="filename">/WEB-INF</code> one is more likely to
      be changed. If you want to add an external application, or if you want
      to configure SiteMesh differently, you must keep track of your changes
      so that you can integrate them with the new release.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="basic_concepts"></a>Chapter&nbsp;3.&nbsp;Basic Concepts</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="site_map"></a>1.&nbsp;The Site Map</h2></div></div></div><p>The site map is one of the most important MeshCMS components.
      Since MeshCMS is file based, there is no site map defined in a database,
      so MeshCMS must figure it out by parsing the file system. The site map
      is not a simple list of pages: it is a hierarchical structure which
      follows some strict rules.</p><p>The key of the site map is the concept of <em class="firstterm">welcome
      file</em>. This concept is well known by webmasters. When you
      access <code class="uri">http://www.site.com/somedirectory/somepage.html</code>, the
      file <code class="filename">somepage.html</code> located in the
      <code class="filename">/somedir</code> directory is sent to your browser. But
      when you access <code class="uri">http://www.site.com/somedirectory/</code>, you are
      requesting a directory, not a file. In such case, a file with a specific
      name is searched into that directory and, if it is available, that file
      is sent to your browser. Usually this file is called
      <code class="filename">index.html</code>, but more than one can be specified, and
      the first match will be used. The default for MeshCMS is to search for
      <code class="filename">index.html</code>, then <code class="filename">index.htm</code> and
      finally <code class="filename">index.jsp</code> (you can change this by editing
      the <code class="filename">web.xml</code> configuration file according to the
      Servlet specification). The result of this convention is that accessing
      <code class="uri">http://www.site.com/somedirectory/</code> and accessing
      <code class="uri">http://www.site.com/somedirectory/index.html</code> will lead to the
      same page.</p><p>MeshCMS uses the welcome files heavily. When it encounters a
      directory while parsing the website tree, it checks whether that
      directory contains a welcome file or not. If there is no welcome file,
      <span class="bold"><strong>that directory is ignored</strong></span>, along with
      all subdirectories. This means that all pages included in that directory
      will <span class="emphasis"><em>not</em></span> be included in the site map, and that
      users will not find those pages in the navigation menu.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Pages included in ignored directories are still available by
        using a direct link or by typing the full address in the browser
        location bar.</p></div><p>Why is the site map made this way? There are two main reasons. The
      first one is that if a directory without welcome file were included in
      the navigation menu, clicking on it would show a listing of the
      directory contents, or an error page if that listing is not allowed. So
      this is a way to force the use of a welcome page. The second reason is
      that there are many cases where a page must not be available in the
      navigation menu. Suppose that you want to use the <a class="link" href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">include module template</a> to add some news in
      your web pages. You will create a directory that will contain an HTML
      file for each news, and then you will use that directory as module
      argument. If none of the HTML files has the name of a welcome file,
      those news will not be inserted in the navigation menu directly, but
      they will still available for the module as expected. This is just an
      example of a situation in which a welcome file should not be
      used.</p><p>When a directory contains a welcome file, it is inserted in the
      site map, and all other items available in that directory are included
      as children pages. Items can be files (HTML or server-side pages) or
      directories (which must have their own welcome file as explained
      above).</p><p>This method has an important drawback: <span class="bold"><strong>a
      page that is not a welcome file cannot have children pages</strong></span>.
      For example, there is no way to add a child page to
      <code class="uri">http://www.site.com/somedirectory/somepage.html</code>. This is
      usually not a problem, since you can always create a page at the same
      level (for example
      <code class="uri">http://www.site.com/somedirectory/otherpage.html</code>), but if you
      think you will want to add children pages to a page, use a new directory
      for it. Keep in mind that
      <code class="uri">http://www.site.com/somedirectory/somepage.html</code> and
      <code class="uri">http://www.site.com/somedirectory/somepage/index.html</code> are
      indexed <span class="bold"><strong>exactly in the same way</strong></span>. If you
      create new pages using the <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page
      Manager</a> tool, leave the "Create enclosing directory" box checked,
      so you will be able to add children pages to your new page in
      future.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="external_tools"></a>2.&nbsp;External Documents and Tools</h2></div></div></div><p>One of the reasons that led to the creation of MeshCMS was the
      need to manage hundreds of HTML documents created previously, and to be
      able to add some Microsoft Word documents if needed. As a consequence,
      MehsCMS accepts any HTML file that it finds while exploring the website
      directory to create the site map. Thanks to the power of SiteMesh, pages
      created in different ways are parsed and decorated, while the title can
      be extracted to be used in the site menu.</p><p>Some MeshCMS users constantly upload Word documents converted to
      HTML, while others edit pages directly on the web using external tools
      like Macromedia Contribute, which they can find more comfortable than
      using the online editor provided by MeshCMS.</p><p>This approach has led to some choices that are different from the
      ones made for other CMSes. For example, there's no need to specify in
      which order pages must be inserted in the navigation menu. While one can
      prefer to take full control of that order, this is really tedious when
      dealing with hundreds of documents. MeshCMS automatically puts the
      welcome file at the beginning on the list and then orders the other
      pages according to the number of visits in the last days. This brings
      the most requested documents at the beginning of the list.</p><p>The <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page Manager</a> tool offers
      an option to assign a <em class="firstterm">score</em> to each page anyway.
      Pages with higher score will always come first, regardless of the count
      of visits. It is a tedious process to use scores to order the whole site
      map, and it is not a user-friendly method at all. But partial orderings
      are allowed: default score is zero for all pages, so one can assign a
      score just to those pages that he wants to see at the beginning
      (positive score) or at the end (negative score) of the list. Pages with
      the same score are ordered according to the number of visits.</p><p>Most users assign a score to first-level pages (for example: home
      page, company profile, products and finally contacts), while subpages
      are left without score.</p><p>Another consequence of the need to support documents that come
      from many sources is that MeshCMS does not check them for standard
      compliance. It respects the generalistic approach that is allowed by
      SiteMesh. Of course, a web developer is still allowed to put document
      type definitions in his own themes and to require his users to deal with
      well-formed documents only.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="multiple_sites"></a>3.&nbsp;Serving multiple sites from a single installation</h2></div></div></div><p>Tomcat and other servlet containers allow to create multiple
      hosts, and to put multiple contexts within them. Web developers usually
      need to host more than a single website on the same server, so they end
      up creating a host for each website and specifying which domains must be
      served by that host. This is a good setup strategy since it allows to
      separate sites and to tune their configuration. Nevertheless, this
      method leads to many installations of MeshCMS that must be maintained
      separately, which is quite annoying, for example when upgrading.</p><p>MeshCMS 3.0 gives the choice between this approach and a different
      one: you can install it once and serve all sites from that single
      context. You will probably configure the host to serve all domains and
      let MeshCMS map them to different sites. The advantages of this approach
      are:</p><div class="itemizedlist"><ul type="disc"><li><p>you have to deal with a single installation of the
          software;</p></li><li><p>you will save some server resources;</p></li><li><p>you can see the files of all sites from the file manager if
          you have the needed permissions;</p></li><li><p>you can configure the sites and their mappings using the web
          interface.</p></li></ul></div><p>The drawbacks are:</p><div class="itemizedlist"><ul type="disc"><li><p>it is more difficult to manage security separately for each
          site;</p></li><li><p>if you use JSP pages in virtual sites, you must keep into
          account the fact that MeshCMS will map URLs to files
          differently.</p></li></ul></div><p>To serve multiple sites, you need to install MeshCMS as usual.
      Then you can use the <a class="link" href="#control_panel" title="Chapter&nbsp;5.&nbsp;Control Panel">Control Panel</a>
      to create new sites. If the DNS has been configured properly, you can
      access new sites immediately. Please do so, log into it with your admin
      user of the main website and check the <a class="link" href="#configure" title="2.&nbsp;Configure">site
      configuration</a> to make sure that all options are fine. You may
      also want to create some users, a welcome page and so on.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="main_and_virtual_sites"></a>3.1.&nbsp;Main site and virtual sites</h3></div></div></div><p>When you install MeshCMS, you have a single site. This is the
        good old default scenario. You can add a virtually unlimited number of
        virtual sites on top of it. While virtual sites behave like the main
        one apparently, there are some differences between. The main
        difference is the fact that a different file is served when a page of
        a virtual site is requested. Normally, if you configure a Tomcat host
        to serve <code class="uri">www.site1.com</code> and <code class="uri">www.site2.com</code>, the
        same file will be served for
        <code class="uri">http://www.site1.com/index.html</code> and
        <code class="uri">http://www.site2.com/index.html</code>. That file is simply
        <code class="filename">/index.html</code>, located in the root context. But if
        you setup <code class="uri">www.site2.com</code> as a virtual site on top of
        <code class="uri">www.site1.com</code>, a request for
        <code class="uri">http://www.site2.com/index.html</code> will lead to
        <code class="filename">/meshcms/sites/site2.com/index.html</code>.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="common_tasks"></a>Chapter&nbsp;4.&nbsp;Common Tasks</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_theme"></a>1.&nbsp;Create a Theme</h2></div></div></div><p>One of the essential features of a CMS is the ability to apply a
      common look &amp; feel to many pages, adding the graphics and some other
      components like the navigation menu. In MeshCMS you can achieve this
      result by using a <em class="firstterm">theme</em>. There is a special
      directory in MeshCMS whose default path is
      <code class="filename">/meshcms/themes</code>. A theme is a subdirectory of
      <code class="filename">/meshcms/themes</code> that contains all the elements
      needed by the theme itself. Those elements are:</p><div class="itemizedlist"><ul type="disc"><li><p>the theme main file: a JSP page named
          <code class="filename">main.jsp</code> that defines the common part of the
          pages and where the variable parts must be inserted;</p></li><li><p>the theme CSS: a CSS file named <code class="filename">main.css</code>
          that has the only special feature of being automatically linked from
          the page if the <a class="link" href="#tag_defaultcss" title="2.2.&nbsp;defaultcss">defaultcss</a>
          custom tag is used. This should always be done, since using that
          syntax, the CSS will also be sent to the wysiwyg editor to display
          the page body being edited;</p></li><li><p>an additional CSS for MeshCMS specific styles (page editor and
          modules), named <code class="filename">meshcms.css</code>. If this CSS is not
          found in the theme, the default one will be used. You can override
          it if you want to change the appearance of MeshCMS components (the
          default is located in the <code class="filename">/meshcms/admin/theme</code>
          directory);</p></li><li><p>any other file needed by the theme: other CSS files, images,
          javascripts and so on. You can then use these files in your main
          file by inserting the <a class="link" href="#tag_themepath" title="2.4.&nbsp;themepath">themepath</a>
          tag that will be replaced with the right path to the theme
          directory.</p></li></ul></div><p>You can assign a theme to a page using the <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page Manager</a> tool in the Control Panel.
      There's no need to assign a theme to each page: if a page has no theme,
      the theme of the parent will be used. For example, if
      <code class="uri">www.yoursite.com/apage.html</code> has no theme, it will look like
      <code class="uri">www.yoursite.com</code>. In many cases a theme is assigned to the
      home page and that's all.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="theme_main_file"></a>1.1.&nbsp;The Theme Main File</h3></div></div></div><p>The main file of a theme is a JSP file that will include
        component of the page being shown:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="mesh" %&gt;

&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;&lt;mesh:pagetitle /&gt;&lt;/title&gt;
  &lt;mesh:defaultcss /&gt;
  &lt;mesh:pagehead /&gt;
 &lt;/head&gt;

 &lt;body&gt;
  &lt;mesh:editor&gt;
   &lt;mesh:pagebody /&gt;
  &lt;/mesh:editor&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre><p>This theme file is very basic, but it works: when applied to the
        sample MeshCMS home page, it looks this way:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/bare_viewing.png" align="middle"></div></div><p>The same basic theme can be used to edit the page:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/bare_editing.png" align="middle"></div></div><p>Now you know that a basic theme isn't complicated at all. In
        fact, it is a normal HTML page (which you can create with your
        favorite editor), that includes some <a class="link" href="#tag_library" title="Chapter&nbsp;7.&nbsp;Tag Library">custom tags</a> that will be replaced by
        MeshCMS with the contents of the page. This is how MeshCMS translates
        the page above:</p><pre class="programlisting">&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Home Page&lt;/title&gt;
  &lt;link type="text/css" rel="stylesheet" href="/meshcms/themes/bare/main.css" /&gt;
  &lt;link type="text/css" rel="stylesheet" href="/meshcms/admin/theme/meshcms.css" /&gt;
  &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
 &lt;/head&gt;

 &lt;body&gt;
  &lt;p&gt;Welcome to MeshCMS 2.0. Here is a list ...&lt;/p&gt;
  ...
 &lt;/body&gt;
&lt;/html&gt;</pre><p>When you create a theme, you should create a normal HTML page
        along with its own CSS file and images and store all files in a
        directory. Use some text placeholder to point out where to put page
        components. For example, write [TITLE] where you expect to see the
        title of the page, [SITE MENU] where you want to see the menu, [BODY]
        where the text of the page should be located and so on. Please note
        that the notation with square brackets has nothing special. They are
        just placeholders. You might also use the "lorem ipsum" text instead
        of [BODY]. Your file might look like this one:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/theme_step1.jpg" align="middle"></div></div><p>This is the corresponding HTML code:</p><pre class="programlisting">&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;[TITLE]&lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom" style="background: url(flowers.jpg) no-repeat; &para;
     height: 120px; padding: 10px; font-size: 22px;"&gt;[TITLE]&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;
    &lt;table border="0" align="center" cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[SITE MENU]&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[MESHCMS MENU]&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
    &lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;[BREADCRUMBS]&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[BODY]&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>When you are happy with your page, open it with a source code
        editor. Replace:</p><div class="itemizedlist"><ul type="disc"><li><p>[TITLE] with <code class="code">&lt;mesh:pagetitle /&gt;</code></p></li><li><p>[SITE MENU] with <code class="code">&lt;mesh:simplemenu
            /&gt;</code></p></li><li><p>[MESHCMS MENU] with <code class="code">&lt;mesh:adminmenu
            /&gt;</code></p></li><li><p>[BREADCRUMBS] with <code class="code">&lt;mesh:breadcrumbs
            /&gt;</code></p></li><li><p>[BODY] with <code class="code">&lt;mesh:pagebody /&gt;</code></p></li></ul></div><p>There is a link to an image in the file: you must add
        <code class="code">&lt;mesh:themepath /&gt;</code> before the image path so it will
        be found correctly. <code class="code">url(flowers.jpg)</code> becomes
        <code class="code">url(&lt;mesh:themepath /&gt;/flowers.jpg)</code>.</p><p>Then add this line at the beginning of your file:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="mesh" %&gt;</pre><p>Save your file and name it <code class="filename">main.jsp</code>. The
        CSS must be named <code class="filename">main.css</code> and must be located in
        the same directory. This directory must be located in the
        <code class="filename">/meshcms/themes</code> directory in your site, and the
        name of the directory will be used as name of the theme itself. All
        images and other files must be located in the same directory. You can
        use subdirectories, but then you need to write paths accordingly: for
        example, if you put all images in a subdirectory called
        <code class="filename">images</code>, you will use <code class="code">url(&lt;mesh:themepath
        /&gt;/images/flowers.jpg)</code> in the example above.</p><p>When your brand new decorator is available, reopen the home page
        of your web site and your new look &amp; feel should now be used to
        display the page:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/theme_step2.jpg" align="middle"></div></div><pre class="programlisting"><span class="bold"><strong>&lt;%@ taglib uri="meshcms-taglib" prefix="mesh" %&gt;</strong></span>

&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;<span class="bold"><strong>&lt;mesh:pagetitle /&gt;</strong></span>&lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom" style="background: &para;
     url(<span class="bold"><strong>&lt;mesh:themepath /&gt;</strong></span>/flowers.jpg) no-repeat; height: 120px; &para;
     padding: 10px; font-size: 22px;"&gt;<span class="bold"><strong>&lt;mesh:pagetitle /&gt;</strong></span>&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;
    &lt;table border="0" align="center"cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;mesh:simplemenu /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;mesh:adminmenu separator="&lt;br /&gt;" /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
    &lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;mesh:breadcrumbs /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;mesh:pagebody /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>There are other tags that you must add in your decorator:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="code">&lt;mesh:pagehead /&gt;</code> and
            <code class="code">&lt;mesh:defaultcss /&gt;</code> go inside the
            <code class="code">&lt;head&gt;</code> tag of your file to include headers and
            CSS;</p></li><li><p><code class="code">&lt;mesh:editor&gt;...&lt;/mesh:editor&gt;</code> must
            enclose all the contents of the <code class="code">&lt;body&gt;</code>
            tag;</p></li><li><p><code class="code">&lt;mesh:setlocale /&gt;</code> to define the locale
            of the pages that will use the theme (optional);</p></li><li><p>you will probably want to add one or more <a class="link" href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">modules</a>; otherwise you can't take
            advantage of available modules in your pages;</p></li><li><p>other <a class="link" href="#tag_library" title="Chapter&nbsp;7.&nbsp;Tag Library">tags</a> could be
            useful in some cases.</p></li></ul></div><p>After these other modifications, you should get this source
        code:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="mesh" %&gt;
<span class="bold"><strong>&lt;mesh:setlocale value="en" /&gt;</strong></span>

&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;
    &lt;mesh:pagetitle /&gt;
    <span class="bold"><strong>&lt;mesh:pagehead /&gt;</strong></span>
    <span class="bold"><strong>&lt;mesh:defaultcss /&gt;</strong></span>
  &lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;<span class="bold"><strong>&lt;mesh:editor&gt;</strong></span>
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom" style="background: &para;
     url(&lt;mesh:themepath /&gt;/flowers.jpg) no-repeat; height: 120px; &para;
     padding: 10px; font-size: 22px;"&gt;&lt;mesh:pagetitle /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;
    &lt;table border="0" align="center" cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;mesh:simplemenu /&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;mesh:adminmenu separator="&lt;br /&gt;" /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
    &lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;&lt;mesh:breadcrumbs /&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;mesh:pagebody /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
<span class="bold"><strong>&lt;/mesh:editor&gt;</strong></span>&lt;/body&gt;

&lt;/html&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edit_page"></a>2.&nbsp;Edit a Page</h2></div></div></div><p>Once you have logged in, you should see some links to edit a page
      while viewing it. Select "Edit this page" and the wysiwyg editor (<a class="ulink" href="http://tinymce.moxiecode.com/" target="_top">TinyMCE</a>) will show up, along
      with other fields to edit the page title and the various modules.</p><p>Editing a page shouldn't be that hard. TinyMCE provides a standard
      interface to write text and format it as desired. It comes with its own
      help.</p><p>MeshCMS adds the ability to browse for links and images. Just
      click on the <span class="inlinemediaobject"><img src="resources/browse_button.gif"></span> Browse icon
      in the image and link popups to access the file manager with all its
      functions (upload included). The link popup also contains a drop down
      list with all pages available in the site map to insert links in a
      moment.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>in some cases, when saving a page you might want to unckeck the
        "use relative URLs when saving" option, so local links will be saved
        with the full path. This is useful when saving pages to be included
        with the include <a class="link" href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">module</a>: this option
        will allow links included in that pages to work regardless of the page
        in which they will be included.</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>TinyMCE comes pre-configured in MeshCMS, but you can change that
        configuration, for example to use other features and plugins.</p></div><p>Other than editing the main page text, MeshCMS supports modules to
      automate some common page components. See <a class="xref" href="#standard_modules" title="1.&nbsp;Standard Modules">Section&nbsp;1, &ldquo;Standard Modules&rdquo;</a> for details.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_new_page"></a>3.&nbsp;Create a New Page</h2></div></div></div><p>In MeshCMS a page is a file. Period. Having said that, there are
      three ways to add a new page:</p><div class="orderedlist"><ol type="1"><li><p>open the <a class="link" href="#file_manager" title="5.&nbsp;File Manager">File Manager</a> and
          create a new HTML file in the desired place. Please keep in mind how
          the <a class="link" href="#site_map" title="1.&nbsp;The Site Map">site map</a> is created;</p></li><li><p>(much easier) go to the <a class="link" href="#control_panel" title="Chapter&nbsp;5.&nbsp;Control Panel">Control
          Panel</a>, then choose <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page
          Manager</a>. Choose the <span class="inlinemediaobject"><img src="resources/newpage_button.gif"></span> icon associated to the right page:
          you will add a child page to that one. A small popup will open.
          Insert a title for the page (use a short one since it wiil be used
          to create a name for the file: you will be able to change it while
          editing the page). Uncheck <code class="option">Create enclosing
          directory</code> only if you are absolutely sure that you won't
          add a child page to the new one in future. Then click on
          <span class="command"><strong>Create</strong></span> and the editor will be opened;</p></li><li><p>(the easiest way) navigate to a page and click on <code class="option">New
          page</code> or on <code class="option">New child page</code>. You will add a
          new page at the same level of the current one or a child page
          respectively. Then continue as above (insert the title and so
          on).</p></li></ol></div><p>Additionally, you can add (and edit) pages from outside MeshCMS,
      for example using an FTP client. After doing that, make sure you run
      <span class="command"><strong>Refresh Site Map</strong></span> in the Control Panel so MeshCMS can
      find your new page(s). The site map is automatically refreshed after
      some hours, so new pages will be found even if you don't start the
      update manually.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="control_panel"></a>Chapter&nbsp;5.&nbsp;Control Panel</h2></div></div></div><p>This is the home page of the MeshCMS admin area. It contains icons
    for the all availabe tools. Icons are shown or hidden according to user's
    privileges.</p><p>Some of them are very simple: there is a link to the home page, a
    button to log in or out and a button to refresh the site map. This one is
    useful when something has been changed from outside MeshCMS (e.g. via FTP
    or some shell), when you want to empty the cache for some reason, or when
    you want menus to be re-ordered according to current page hits.</p><p>Other functions are more complex and are described in separate
    sections.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="page_manager"></a>1.&nbsp;Page Manager</h2></div></div></div><p>Here the site map is shown in a convenient way and some actions
      are available for each page. The table has these columns:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Page title</strong></span>: shows the title
          of the page, preceded by an icon that allows to show/hide children
          pages (if any).</p></li><li><p><span class="bold"><strong>Hits</strong></span>: a count of the page
          hits in the last days. This is not serious statistics, but since
          this count is stored to be used when sorting pages, it is shown here
          to have a rough idea of how much a page is being visited.</p></li><li><p><span class="bold"><strong>Cache</strong></span>: indicates if the page
          is currently available in the page cache.</p></li><li><p><span class="bold"><strong>Menu Caption</strong></span>: the name of the
          page in the navigation menus, breadcrumbs and links. If the field is
          empty, the page title will be used instead.</p></li><li><p><span class="bold"><strong>Theme</strong></span>: the theme used for the
          page. If the field is empty, the theme of the parent will be used.
          If <code class="option">no theme</code> is selected, the page will be shown "as
          is".</p></li><li><p><span class="bold"><strong>Score</strong></span>: a number that
          indicates the &ldquo;<span class="quote">importance</span>&rdquo; of the page. This value is
          used to sort pages in menus. Pages with the same score are sorted
          according to their hits. If the score is not specified, its value is
          zero, so you can use a negative value to put pages at the end of the
          list.</p></li><li><p><span class="bold"><strong>Actions</strong></span>: icons to perform
          some actions related to that page:</p><div class="itemizedlist"><ul type="circle"><li><p><span class="emphasis"><em>View this page</em></span>;</p></li><li><p><span class="emphasis"><em>Edit this page</em></span>: uses the best editor
              (visual or source) according to the file type;</p></li><li><p><span class="emphasis"><em>Create a new child page</em></span>: available if
              that page can have children (see <a class="xref" href="#site_map" title="1.&nbsp;The Site Map">Section&nbsp;1, &ldquo;The Site Map&rdquo;</a> for
              details);</p></li><li><p><span class="emphasis"><em>Delete this page</em></span>: available if the
              page has not children pages;</p></li><li><p><span class="emphasis"><em>Toggle submenu visibility</em></span>: if grayed
              out, some menus will take this option into account and will not
              display children of that page (useful when a page has too many
              children for example).</p></li></ul></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure"></a>2.&nbsp;Configure</h2></div></div></div><p>The configure page is available to administrators only. Editable
      options are divided in groups.</p><p>The first section allows to define some values for the site, which
      can be useful or not according to the theme used. The theme can display
      them using the <a class="link" href="#tag_info" title="5.1.&nbsp;info">info</a> tag.</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Name</strong></span>: name of the
          site;</p></li><li><p><span class="bold"><strong>Host (domain)</strong></span>: the main host
          for the site (e.g. www.site.com, not the full URL);</p></li><li><p><span class="bold"><strong>Description</strong></span>: a description of
          the site (usually inserted into the related meta tag);</p></li><li><p><span class="bold"><strong>Keywords</strong></span>: some keywords for
          the site (usually inserted into the related meta tag);</p></li><li><p><span class="bold"><strong>Author</strong></span>: name of the site
          author (e.g. for a copyright notice);</p></li><li><p><span class="bold"><strong>Author full URL</strong></span>: full address
          of the author's website.</p></li></ul></div><p>The second section defines some interface parameters.</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Visually editable types</strong></span>: a
          comma-separated list of file types that can be edited using the
          wysiwyg editor;</p></li><li><p><span class="bold"><strong>Use system theme</strong></span>: if this
          option is selected, the default system theme will be used for the
          control panel and for all other administrative pages. While it is
          preferable to use the same theme as the rest of the site, it is
          recommended to turn this option on while editing themes, so admin
          pages are always available without errors;</p></li><li><p><span class="bold"><strong>Prevent hotlinking</strong></span>: if
          selected, others are not allowed to link to your images and files
          directly: they must link to pages on your site. A simple window will
          be shown to state that the file comes from your site. That page
          won't mention that you're using MeshCMS;</p></li><li><p><span class="bold"><strong>Use high quality thumbnails by
          default</strong></span>: if selected, the file manager and the gallery
          module will create thumbnails with a better quality;</p></li><li><p><span class="bold"><strong>Resize images on the server when
          needed</strong></span>: if selected, when an image with a defined size is
          found in the page HTML code, MeshCMS will replace it with a resized
          image, so you can safely include a big image in a page and resize it
          from within TinyMCE. Note that it is recommended to enable high
          quality thumbnails (see above) when this option is on;</p></li><li><p><span class="bold"><strong>Modules are collapsed initially in the
          editor</strong></span>: if this option is checked, you will need to click
          on a module caption in the editor to modify the module. This has
          been done to make the editor interface less cluttered when a theme
          has many modules.</p></li></ul></div><p>The third section configures the SMTP server used to send mail
      messages.</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Server name</strong></span>: the name of the
          server used to send e-mail messages when a visitor compiles a mail
          form;</p></li><li><p><span class="bold"><strong>Username</strong></span>: needed if the
          server requires authentication;</p></li><li><p><span class="bold"><strong>Password</strong></span>: needed if the
          server requires authentication.</p></li></ul></div><p>The fourth section defines more system parameters.</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Page cache</strong></span>: used to activate
          the page caching. This is highly recommended since the "decoration"
          of a page is a quite expensive task. If you have much memory (or few
          pages), you can store cached pages in memory, otherwise save them on
          disk. By default, a mixed strategy is used: memory storage with
          fallback to disk. Pages are saved in GZIP format and are sent
          compressed when the browser supports that (always true with modern
          browsers);</p></li><li><p><span class="bold"><strong>Clean HTML code when saving</strong></span>:
          used to improve quality of generated HTML: if this option is
          enabled, pages edited visually are post-processed on the server to
          generate valid XHTML;</p></li><li><p><span class="bold"><strong>Site map update interval
          (hours)</strong></span>: the validity of the site map. After the
          specified amount of hours, the site map is recreated and the page
          cache is emptied;</p></li><li><p><span class="bold"><strong>Backup life (days)</strong></span>: the
          validity of backup files. Those files are stored in the repository.
          While there is no interface to manage them at the moment, they are
          still available in the file system so a deleted file can be
          recovered in case of mistake using an FTP client or some other
          shell;</p></li><li><p><span class="bold"><strong>Hits counting period (days)</strong></span>:
          page hits are counted for some days to allow to sort pages when no
          other criteria is available. If you change this value, the new one
          will be used after a restart of the web application;</p></li><li><p><span class="bold"><strong>Always redirect to welcome
          pages</strong></span>: check this option to ask MeshCMS to check if a
          welcome file is available when the required URL points to a
          directory. Usually the servlet container does this, but it is not
          the case for the default Jetty configuration for example. Setting
          this option to true allows to achieve a uniform behavior and offers
          better safety if virtual sites are used (the servlet container is
          not aware of MeshCMS virtual sites);</p></li><li><p><span class="bold"><strong>Redirect moved pages if
          possible</strong></span>: if this option is enabled, MeshCMS tries to
          redirect not found pages to other ones based on file path. Similar
          paths are matched starting from the end and going up recursively: a
          page like
          <code class="uri">www.site.com/products/someproductline/productname</code> will be
          successfully redirected to
          <code class="uri">www.site.com/somedivision/products/someproductline/productname</code>;</p></li><li><p><span class="bold"><strong>Always deny directory
          listings</strong></span>: check this option to show an error when a
          directory is required and there's no welcome file within it. Again,
          you can achieve the same result by configuring the servlet container
          properly, but if virtual sites are used it is better to make use of
          this option instead of relying on the container;</p></li><li><p><span class="bold"><strong>Hide Java exceptions when
          possible</strong></span>: if this option is checked, MeshCMS tries to
          catch Java exception and hide its details to site visitors (it will
          be logged though);</p></li><li><p><span class="bold"><strong>Redirect the home page to one of the
          available languages</strong></span>: if this option is checked and there
          is at least a page whose path is equal to a language code (e.g. /en,
          /it), requests for the home page will be redirected to the language
          that matches browser preferences (see <a class="xref" href="#multilingual" title="2.&nbsp;Multilingual sites">Section&nbsp;2, &ldquo;Multilingual sites&rdquo;</a>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edit_profile"></a>3.&nbsp;Edit Profile</h2></div></div></div><p>The purpose of this page is simple: you can change your password
      and edit your profile. Details are optional. The e-mail is optional too,
      but is located between the required elements since there's the plan to
      add a simple message board in future.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="new_user"></a>4.&nbsp;New User</h2></div></div></div><p>To create a new user, you need to specify these info:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>username</strong></span>;</p></li><li><p><span class="bold"><strong>user type</strong></span>:
          <code class="option">Administrator</code> has all privileges,
          <code class="option">Editor</code> can edit pages but can't do admin stuff and
          <code class="option">Member</code> can browse files and not much more (in fact
          it is rarely used);</p></li><li><p><span class="bold"><strong>home directory</strong></span>: the directory
          in which the user can edit files;</p></li><li><p><span class="bold"><strong>password</strong></span>: an initial password
          that can be changed later by the user himself.</p></li></ul></div><p>All other fields are optional.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="file_manager"></a>5.&nbsp;File Manager</h2></div></div></div><p>The MeshCMS file manager is a web-based version of the file
      manager you probably use daily on your computer. It allows to manage the
      file system of your website.</p><p>The look &amp; feel of the file manager window should be familiar
      to everyone. On the left there is the directory tree, while the contents
      of the currently opened directory are shown on the right. There you can
      select some items and choose an action from the menu at the top of the
      window.</p><p>Most of the menu items are easy to understand. Probably the
      <span class="property">Themes</span> menu is the most &ldquo;<span class="quote">obscure</span>&rdquo;, in
      fact it is rarely used. This menu allows to specify what theme should be
      applied to a page or directory. Normally it's easier to apply themes
      using the <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page Manager</a> feature of
      the Control Panel, but using the file manager you can apply themes even
      to files not included in the site map. Simply select the desired items
      and then pick a theme for them. If you choose <code class="option">Don't
      Specify</code>, the theme will be inherited from the parent directory
      (this is the default for all items that don't have an associated theme,
      in fact if you only select a theme for the home page, all other pages
      will use it). If you choose <code class="option">No Theme</code>, nothing will be
      applied to that file, which will be shown "as is".</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Since the file manager is a web application, operations are not
        executed immediately. Commands are sent to the server the usual
        request-execution-response cycle must happen. While much care has been
        taken to ensure that command are interpreted correctly, please try to
        execute one task at a time, making sure you wait it to complete before
        doing another thing.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="upload"></a>5.1.&nbsp;Upload</h3></div></div></div><p>The upload tool is essential, since it is used to add new files.
        You can upload one file at a time, so if you need to upload many
        files, you better create a ZIP archive, upload it and finally <a class="link" href="#unzip" title="5.2.&nbsp;Unzip">unzip</a> it.</p><p>To upload a file, navigate to the desired directory and select
        <span class="command"><strong>Upload</strong></span> from the <code class="option">Tools</code> menu. Then
        select the file from your computer and start uploading.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>a file with the same name will be overwritten without
          confirmation.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="unzip"></a>5.2.&nbsp;Unzip</h3></div></div></div><p>You can unpack a ZIP archive from within the file manager. It
        will be unpacked in the same directory or in a subdirectory, so make
        sure to put it in the right place before unzipping (you can always
        move the unpacked items later).</p><p>Select the ZIP file (it can have any extension) and choose
        <span class="command"><strong>Unzip</strong></span> from the <code class="option">Tools</code> menu. You'll
        see a list of the files that are packed into the archive. If you
        prefer, you can check the flag to unzip the files in a new directory
        and edit its name. Note that many archives already put all files in a
        directory: you can verify if this is the case by looking at the list
        of files.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>this operation is quite dangerous, since it will overwrite
          files if needed, without backing them up. So it is highly
          recommended to unzip files in a new directory as described above.
          Then you can move them safely.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="static_export"></a>6.&nbsp;Static Export</h2></div></div></div><p>MeshCMS offers an option to export a static copy of the site. That
      copy can be served by any HTTP server (e.g. Apache) without the need of
      a Java Servlet container. For example, you could use static export to
      edit a site in the Intranet using a local Tomcat, then publishing the
      site on an external server at any time.</p><p>Please note that the lack of a servlet container means that
      modules that require server interaction (like <a class="link" href="#module_mail" title="1.17.&nbsp;Mail">Mail</a> and <a class="link" href="#module_comments" title="1.6.&nbsp;Comments">Comments</a>) won't work as expected. All
      others will work since their content (e.g. gallery thumbnails) will be
      generated while exporting.</p><p>To perform a static export, some parameters must be
      specified:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>URL to get the home page</strong></span>:
          needs to be explicitly set when the local URL is different from the
          external one. For example, suppose that your Tomcat is running on a
          machine named <span class="emphasis"><em>localserver</em></span>, and that its
          firewall redirects connections to port 80 to Tomcat, which is
          running on port 8080. In such a situation, you will access Tomcat
          externally at <code class="uri">http://localserver/</code>, while the static
          export (which accesses pages from the server itself) must use
          <code class="uri">http://localserver:8080/</code>, or
          <code class="uri">http://localhost:8080/</code>. In this case, the local URL must
          be specified;</p></li><li><p><span class="bold"><strong>Destination directory</strong></span>: the
          local path of the exported copy, i.e. where the site will be
          exported (required);</p></li><li><p><span class="bold"><strong>Check for files that do not need to be
          updated</strong></span>: if checked, files already exported are not
          copied again. This works for files whose modification time is newer
          in the target directory. Please note that pages are always
          re-exported, since changes could be in generated parts, like menus
          or modules;</p></li><li><p><span class="bold"><strong>Command to be executed after
          export</strong></span>: an optional command that can be run when the
          export is completed. This is a shell command to be executed in a
          process and could be used to sync the exported site on a FTP
          connection. As a trivial example, you could use <span class="command"><strong>sh -c 'ls
          -R /my/exporting/dir'</strong></span> or <span class="command"><strong>cmd /c "dir /s
          C:\my\exporting\dir"</strong></span> to get a list of exported
          files.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="site_manager"></a>7.&nbsp;Site Manager</h2></div></div></div><p>The site manager is available for administrators only. It is not
      available at all in virtual sites. It is used to manage virtual sites
      and to map domains to sites. If no virtual sites are defined, this page
      can be used to define the first one. Otherwise, more options are
      available.</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Use directory names as domain
          names</strong></span>: if true, names of the directories that contain
          virtual sites will be taken into account when mapping domains to
          sites;</p></li><li><p><span class="bold"><strong>Automatically manage the "www."
          prefix</strong></span>: if true, an additional mapping will be used for
          each domain name specified, to map the same domain with the www
          prefix added. This parameter applies to <span class="emphasis"><em>all</em></span>
          domain names defined;</p></li><li><p><span class="bold"><strong>Domain aliases for the main
          website</strong></span>: a comma-separated list of domain names that must
          point to the main website. If no domain names are specified, all
          domain names that are not mapped to other sites will point to the
          main site. If at least a domain is specified and an unlisted domain
          is requested, MeshCMS will send a server error as response;</p></li><li><p><span class="bold"><strong>CMS enabled</strong></span>: a flag that
          indicates that the CMS is active in that website (otherwise it is
          just a static website);</p></li><li><p><span class="bold"><strong>Block JSPs</strong></span>: allows to limit
          the usage of JSP pages in that site for security reasons. It relies
          on a code filter that should allow harmless operations only
          Currently, it allows to:</p><div class="itemizedlist"><ul type="circle"><li><p>use the MeshCMS taglib with the
              <code class="code"><code class="code">cms</code></code> prefix;</p></li><li><p>use the <code class="code">page</code> JSP directive;</p></li><li><p>use JSP comments;</p></li><li><p>use HTML (tags, doctypes and comments).</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This block may result in a strong limit for the website,
            since themes can only use the taglib and legal custom modules are
            nearly useless.</p></div></li></ul></div><p>After these options, a table of virtual sites follows. For each
      site the directory name is shown and a check indicates that the CMS is
      active for that site. It is possible to add or modify a comma-separated
      list of domains that will be mapped to that site.</p><p>At the end of the list, a blank row is available to create a new
      site. You must specify the directory name and optionally add aliases and
      enable the CMS.</p><p>Please be careful when specifying domain names: if a domain is
      mapped to more than one site, it is hard to know which one will be
      associated to that domain.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="modules"></a>Chapter&nbsp;6.&nbsp;Modules</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="standard_modules"></a>1.&nbsp;Standard Modules</h2></div></div></div><p>A web page is not just a block of text. Many pages on the web
      perform some common tasks: image galleries, mail forms, news and so on.
      While one can just write down those pages each time, it is clear that
      some automation is possible in those cases. The MeshCMS answer to this
      demand is the concept of <em class="firstterm">module</em>. A module is a
      configurable zone in a page: when you edit the page, you have some boxes
      where you can select a module and provide an
      <em class="firstterm">argument</em> (usually a file or directory) and some
      advanced parameters. If the argument is not specified, modules behave
      differently: some can default to the directory that contains the page,
      while others will do nothing.<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>the argument of a module is not necessarily a directory or a
          file. For example, in the mail module you can specify an e-mail
          address as argument, and a standard form will be created using that
          address as recipient.</p></div></p><p>When you edit a page, you will have the chance to configure as
      many modules as the page theme specifies. Normally all themes should
      contain a module at least. For each module you can also set a title and
      some advanced parameters. The former can be displayed in the page or
      not, according to the theme used. The latters depend on the module used
      and allow to customize it further, although modules are expected to
      provide an adequate default behavior when no parameters are
      specified.</p><p>MeshCMS provides some modules, and others can be created by
      everyone that is able to write a JSP page. Details about available
      modules are illustrated in the following sections.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_audio_player"></a>1.1.&nbsp;Audio Player</h3></div></div></div><p>The audio player module shows a MP3 player using the Flash-based
        <a class="ulink" href="http://musicplayer.sourceforge.net/" target="_top">XSPF Web Music
        Player</a>. It will play all the MP3 files that are available in
        the directory passed as argument.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_blog"></a>1.2.&nbsp;Blog</h3></div></div></div><p>The blog module shows a preview of pages in a directory using a
        blog-like interface: content is truncated to a maximum length and
        links to full pages are provided. Pages are ordered by date and meta
        keywords are displayed as "article tags".</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>entries</code></em>: number of entries per page
            (default <code class="option">5</code>);</p></li><li><p><em class="parameter"><code>maxchars</code></em>: maximum length of the
            excerpt for each article (default <code class="option">1200</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_blog_calendar"></a>1.3.&nbsp;Blog Calendar</h3></div></div></div><p>The blog calendar module shows a list of months/years to select
        articles in a specific month. It has been thought to be used in the
        same page as the blog module.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_blog_tag_list"></a>1.4.&nbsp;Blog Tag List</h3></div></div></div><p>The blog tag list module shows a list of tags to select articles
        marked with a specific tag. It has been thought to be used in the same
        page as the blog module.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>step</code></em>: step for item css classes
            (default <code class="option">1</code> - use <code class="option">0</code> to remove
            classes);</p></li><li><p><em class="parameter"><code>max</code></em>: maximum for item css classes
            (default no maximum).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_chat"></a>1.5.&nbsp;Chat</h3></div></div></div><p>The chat module has been created by Pierre M&eacute;tras and provides a
        simple, AJAX-based chat. To use it, simply select the module: no
        argument is needed.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>room</code></em>: chat room identifier, else use
            public room shared by all pages and all sites;</p></li><li><p><em class="parameter"><code>cols</code></em>: number of columns of the chat
            list;</p></li><li><p><em class="parameter"><code>rows</code></em>: number of rows of the chat
            list.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_comments"></a>1.6.&nbsp;Comments</h3></div></div></div><p>The comments module creates a form that allows site visitors to
        leave comments on that page. Authenticated users with edit permissions
        on that page can delete unwanted comments by visiting the page
        itself.</p><p>Argument: path to a directory used to hold comments. If not
        provided, a default directory will be used.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>form_css</code></em>: the ccs class of the
            <code class="option">div</code> that contains the entire form. The default
            value is <code class="option">mailform</code>;</p></li><li><p><em class="parameter"><code>field_css</code></em>: the css class of the
            individual form fields. The default value is
            <code class="option">formfields</code>;</p></li><li><p><em class="parameter"><code>notify</code></em>: an optional e-mail address to
            receive comment notifications;</p></li><li><p><em class="parameter"><code>max_age</code></em>: maximum number of days after
            which comments are not shown (default no maximum);</p></li><li><p><em class="parameter"><code>moderated</code></em>: hides comments until
            approved by an authenticated user (default
            <code class="option">false</code>);</p></li><li><p><em class="parameter"><code>math</code></em>: asks users to calculate the sum
            of two numbers (default <code class="option">false</code>);</p></li><li><p><em class="parameter"><code>captcha</code></em>: shows a CAPTCHA image
            (default <code class="option">true</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_diary"></a>1.7.&nbsp;Diary</h3></div></div></div><p>The diary module creates a page showing the first words of a
        list of pages with links to the full pages, in a similar fashion to
        the <a class="link" href="#module_headlines" title="1.12.&nbsp;Headlines">headlines</a> module. The
        Diary module allows you to filter and sort the summarized pages by
        date. The date used for sorting can be specified in two
        ways:<div class="itemizedlist"><ul type="disc"><li><p>By including the date in the page, and surrounding it in a
              CSS style, either in a <code class="code">&lt;div&gt;</code> or
              <code class="code">&lt;span&gt;</code> element. The default style is
              <code class="option">diary-date</code>. The date itself must be in the
              <code class="option">normal</code> date format, for example as output by
              the <a class="link" href="#tag_lastmodified" title="5.3.&nbsp;lastmodified">lastmodified</a> tag. If
              you add the <code class="option">diary-date</code> style to your theme
              stylesheet, you can use the page editor to easily tag the date
              in a page.</p></li><li><p>If the date is not specified in the page, the last
              modified date of the file is used. This can be set using the
              <a class="link" href="#file_manager" title="5.&nbsp;File Manager">File Manager</a> if
              required.</p></li><li><p>If the date us set to the string <code class="code">IGNORE_FILE</code>,
              the file will be ignored and will not be indexed by the Diary
              module.</p></li></ul></div></p><p>Argument: path to a directory. If not provided, defaults to the
        directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: The name of a css class, for
            displaying the generated list;</p></li><li><p><em class="parameter"><code>date</code></em>: The date format to be used for
            labelling the list entries. <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) or <code class="option">full</code> (date
            and time);</p></li><li><p><em class="parameter"><code>start:</code></em> The date to start the listing
            from, either in <code class="option">normal</code> format or as an offset
            from today of the form <code class="option">[+-]NN[dwmy]</code>, where [dwmy]
            is the unit type - days, weeks, months, years and NN is the number
            of days, weeks, months or years. The default is the current
            date;</p></li><li><p><em class="parameter"><code>period</code></em>: The period for which entries
            are to be displayed (default is all past entries);</p><div class="itemizedlist"><ul type="circle"><li><p><code class="option">+</code> all future entries</p></li><li><p><code class="option">-</code> all past entries</p></li><li><p><code class="option">+-</code> all entries, sorted new to
                old</p></li><li><p><code class="option">-+</code> all entries, sorted old to
                new</p></li><li><p><code class="option">[+-]NN[dwmy]</code> entries within a specified
                period, in the same format as the <em class="parameter"><code>start</code></em>
                parameter</p></li></ul></div></li><li><p><em class="parameter"><code>date-style</code></em>: CSS style used to tag the
            date used for sorting (default =
            <code class="option">diary-date</code>);</p></li><li><p><em class="parameter"><code>words</code></em>: The number of words to display
            for each item (default = 50);</p></li><li><p>items: The maximum number of entries to display in the list,
            where -1 means all entries, default = 5.</p></li></ul></div><div class="example"><a name="N106C6"></a><p class="title"><b>Example&nbsp;6.1.&nbsp;An example of tagging a date so that it is used to sort the
          page. Be sure to format the date appropriately for the locale you
          are using:</b></p><div class="example-contents"><p><pre class="programlisting">&lt;h1&gt;Date: &lt;span class="diary-date"&gt;01-Dec-2006&lt;/span&gt;&lt;/h2&gt;</pre></p></div></div><br class="example-break"><div class="example"><a name="N106CD"></a><p class="title"><b>Example&nbsp;6.2.&nbsp;An example showing how to use IGNORE_FILE to skip the
          indexing a file. The 'hide' style is used to stop the IGNORE_FILE
          string from being displayed.</b></p><div class="example-contents"><p><pre class="programlisting">&lt;span class="diary-date hide"&gt;IGNORE_FILE&lt;/span&gt;</pre></p></div></div><br class="example-break"><div class="example"><a name="N106D4"></a><p class="title"><b>Example&nbsp;6.3.&nbsp;An example using advanced parameters to display all future
          entries:</b></p><div class="example-contents"><p><pre class="programlisting">period=+, items=-1</pre></p></div></div><br class="example-break"><div class="example"><a name="N106DB"></a><p class="title"><b>Example&nbsp;6.4.&nbsp;An example using advanced parameters to display entries
          starting at a specified date, for a specified period. Again, the
          date needs to be formatted appropriately for the locale you are
          using:</b></p><div class="example-contents"><p><pre class="programlisting">start=01-Jan-2006, period=-6m, items=-1</pre></p></div></div><br class="example-break"><div class="example"><a name="N106E2"></a><p class="title"><b>Example&nbsp;6.5.&nbsp;An example of diary entries starting 1 year ago, forwards for
          a period of 1 month. If there are more than 10 entries only the
          first 10 would be shown:</b></p><div class="example-contents"><p><pre class="programlisting">start=-1y, period=+1m, items=10</pre></p></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_downloads"></a>1.8.&nbsp;Downloads</h3></div></div></div><p>The downloads module creates a list of downloadable files. An
        icon and the size are shown near the name of each file.</p><p>Argument: path to a file or directory. If not provided, the
        module does nothing.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>force</code></em>: forces download even for files
            that could be viewed in the browser (default
            <code class="option">true</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_embed"></a>1.9.&nbsp;Embed</h3></div></div></div><p>The embed module is useful to embed code snippets in the page
        (e.g. YouTube videos).</p><p>Argument: code snippet or path to a file that contains the code
        to be inserted. If not provided, the module does nothing.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>delay</code></em>: uses JavaScript to embed the
            code after page load (default <code class="option">false</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_frame"></a>1.10.&nbsp;Frame</h3></div></div></div><p>The frame module allows to display an external page in an
        IFrame.</p><p>Argument: path or URL of the page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>height</code></em>: the height of the IFrame
            (default <code class="option">40em</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_gallery"></a>1.11.&nbsp;Gallery</h3></div></div></div><p>The gallery module creates thumbnails for a list of images.
        Thumbnails link to full images, and file names are used as
        captions.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>captions</code></em>: defines if the captions
            must be shown or not. Values are <code class="option">true</code> (default)
            and <code class="option">false</code>;</p></li><li><p><em class="parameter"><code>columns</code></em>: defines the number of
            columns (default <code class="option">3</code>);</p></li><li><p><em class="parameter"><code>quality</code></em>: defines the algorithm used
            to create the thumbnails. Values are <code class="option">low</code> and
            <code class="option">high</code> (default). High quality requires more CPU
            and RAM (thumbnails are cached anyway);</p></li><li><p><em class="parameter"><code>order</code></em>: defines the sort order of the
            thumbnails. Values are <code class="option">name</code> (default),
            <code class="option">date</code> or <code class="option">date_fwd</code> (sort forwards
            by date), <code class="option">date_rev</code> (sort reversed by date),
            <code class="option">random</code>;</p></li><li><p><em class="parameter"><code>lightbox</code></em>: if <code class="option">true</code>,
            the famous Lightbox script is used to show images (default
            <code class="option">false</code>). Please check that it is compatible with
            your theme.</p></li></ul></div><p>By default, the labels which are displayed under the thumbnails
        are generated from the image filenames, using the following
        steps:</p><div class="itemizedlist"><ul type="disc"><li><p>The file suffix is removed;</p></li><li><p>All underscores are replaced with spaces;</p></li><li><p>The first character of each resulting word is converted to
            title (upper) case.</p></li></ul></div><p>So by formatting the image filenames appropriately you can
        specify the thumbnail label. If this proves inconvenient, for example
        if you want to order the files by name but want to use different
        thumbnail labels, or if you want to use characters that are not valid
        as part of a filename, you can specify the thumbnail labels in a
        seperate text file. This file is called
        <code class="option">gallery.captions</code> and must be in the same directory as
        the image files to which it refers. The format of this file is simple:
        it must contain a block for each required thumbnail caption. Blocks
        are seperated by a blank line, and each block consists of single image
        filename on a line, followed by one or more lines of caption text. If
        one of those lines starts with <code class="literal">link:</code>, it will be
        used as URL instead of the full image. An example is given
        below.</p><div class="example"><a name="N107A2"></a><p class="title"><b>Example&nbsp;6.6.&nbsp;An example gallery.captions file, containing thumbnail
          captions for three files:</b></p><div class="example-contents"><pre class="programlisting">image_01.jpg
This is the first image

image_02.jpg
This is the
second image

image_03.jpg
link: http://www.yoursite.com
This is the third image</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_headlines"></a>1.12.&nbsp;Headlines</h3></div></div></div><p>The headlines module shows the first words of a list of pages,
        adding links to go to the full pages.</p><p>Argument: path to a directory. If not provided, defaults to the
        directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>maxchars</code></em>: maximum length of the
            excerpt for each page (default <code class="option">500</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_include"></a>1.13.&nbsp;Include</h3></div></div></div><p>The include module adds the contents of a list of pages.</p><p>Argument: path to a file or directory. If not provided, the
        module does nothing.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_include_as_text"></a>1.14.&nbsp;Include As Text</h3></div></div></div><p>The include as text module adds the contents of a list of files
        as plain text (i.e. inside a <code class="code">&lt;pre&gt;</code> tag).</p><p>Argument: path to a file or directory. If not provided, the
        module does nothing.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_latest_changes"></a>1.15.&nbsp;Latest Changes</h3></div></div></div><p>The latest changes module shows the first words of the most
        recently modified pages, adding links to go to the full pages.
        Modified pages are searched in subdirectories too.</p><p>Argument: path to a directory. If not provided, defaults to the
        directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>words</code></em>: defines the number of words to
            show for each page (default <code class="option">50</code>).</p></li><li><p><em class="parameter"><code>items</code></em>: defines the number of pages to
            show (default <code class="option">5</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_list_pages"></a>1.16.&nbsp;List Pages</h3></div></div></div><p>The list pages module creates a list of links to the pages
        contained in the given directory.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_mail"></a>1.17.&nbsp;Mail</h3></div></div></div><p>The mail module creates a mail form. This allows visitors to
        your site to send you mail without you having to expose your email
        addresses on your site.</p><p>Argument: email address or path to mail form definition file
        (see below).</p><p>Advanced parameters:</p><p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>form_css</code></em>: the ccs class of the
              <code class="option">div</code> that contains the entire form. The default
              value is <code class="option">mailform</code>;</p></li><li><p><em class="parameter"><code>field_css</code></em>: the css class of the
              individual form fields. The default value is
              <code class="option">formfields</code>.</p></li></ul></div><em><span class="remark">Note</span></em>: There is a bug in Internet
        Explorer 6 that affects the display of the <code class="option">textarea</code>
        form component. This results in the <code class="option">textarea</code> being
        resized inappropriately as soon as text is entered into it. The
        workaround is to explicitly set the width of the <code class="option">div</code>
        containing the form, and to set the width of the contained fields to
        <code class="option">100%</code>. The default ccs for the
        <code class="option">mailform</code> and <code class="option">formfields</code> styles does
        this to avoid the bug, be aware of this if you choose to modify or
        override these styles.</p><p>The mail module can be used in one of two ways:</p><div class="orderedlist"><ol type="1"><li><p>you can specify an e-mail address as argument. A simple form
            will be inserted into the page and the address you entered will
            receive the messages. The form can't be customized, but this
            method is very easy to apply and will be enough for most
            situations;</p></li><li><p>you can specify the name of a text file as argument. In this
            case, the form will be created accorded to the instructions
            contained in that file. This method offers more options and will
            be described in the rest of this section, since it requires you to
            learn the syntax used in the text file.</p></li></ol></div><p>In both cases, messages sent through a mail form will be
        delivered to an address you specify (which will not be visible to
        anyone viewing your site, since it's not displayed in the page and not
        included in its source).</p><p>To create a form using the second method, you must write a text
        file that adheres to a specific syntax. As a first example, let's
        create the simplest form you could use (similar to the one provided by
        method 1, above):</p><pre class="programlisting">recipient:name@site.com

Name

E-mail
email
sender

Message
text:12

Send
submit</pre><p>Field definition blocks are separated by empty lines. The first
        line of each block ia a field name on the resulting form. Let's look
        at each block separately:</p><div class="orderedlist"><ol type="1"><li><p>the first line specifies the <code class="option">recipient</code>
            address;</p></li><li><p>"Name" is a text field. This is the default when no other
            parameters are specified;</p></li><li><p>"E-mail" is a text field that is expected to contain an
            <code class="option">e-mail</code> address (a check will be executed to
            verify this condition). Its value will be used as
            <code class="option">sender</code> address;</p></li><li><p>"Message" and is a text area of <code class="option">12</code>
            rows;</p></li><li><p>the next element is a <code class="option">submit</code> button whose
            label is "Send this message".</p></li></ol></div><p>Here's how to add a drop down box:</p><pre class="programlisting">recipient:name@site.com

Name

E-mail
email
sender

<span class="bold"><strong>Topic
options: Information, Support Request, Feedback</strong></span>

Message
text:16

Send Now
submit</pre><p>Other notes:</p><div class="itemizedlist"><ul type="disc"><li><p>the default field type is <code class="option">text</code>;</p></li><li><p>the <code class="option">number</code> field type can be used for
            fields that require a numeric value;</p></li><li><p>the <code class="option">reset</code> field inserts a reset button. A
            label can be specified as for the <code class="option">submit</code>
            button;</p></li><li><p>the <code class="option">textarea</code> field type is a synonym for
            <code class="option">text:12</code>;</p></li><li><p>the <code class="option">value</code>: line can be used to provide a
            default value for all fields of type <code class="option">text</code>,
            <code class="option">email</code>, <code class="option">number</code> and
            <code class="option">textarea</code>;</p></li><li><p>the <code class="option">options</code>: line can be used to provide a
            list of values for a drop-down box;</p></li><li><p>the <code class="option">sendername</code> attribute indicates that the
            field value is to be used as name of the sender;</p></li><li><p>the <code class="option">sender</code> attribute indicates that the
            field value is to be used as the email address of the
            sender;</p></li><li><p>the <code class="option">subject</code> attribute indicates that the
            field value will be the subject of the message;</p></li><li><p>the <code class="option">message</code> attribute will insert the field
            value "as is", i.e. without specifying a field name;</p></li><li><p>the <code class="option">required</code> attribute may be specified to
            make a field mandatory. Required fields are shown in bold by
            default;</p></li><li><p>the <code class="option">hidden</code> attribute can be used to include
            a non-displaying value in the form;</p></li><li><p>the <code class="option">messagebody</code> attribute can be used to
            identify the field to be used as the body of the generated
            email;</p></li><li><p>buttons are inserted at the end of the form, regardless of
            the field order;</p></li><li><p>each parameter (field name, field type, options, etc.) must
            be on a single line.</p></li></ul></div><p>A more complex example is shown here:</p><pre class="programlisting">recipient:name@site.com

Note
hidden
value: This is a hidden note

Name
sendername

E-mail
email
sender

Gender
options: male, female

Age
options: less than 13, 13-20, 21-30, 31-40, 41-50, 51-60, more than 60

Subject
subject
value: Hello
required

Message
text:16
required

Send Now
submit

Reset All Fields
reset</pre><p>And here's how it looks in the browser:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/sample_mail_form.png" align="middle"></div></div><p>Finally, this is the default MeshCMS form in English (the
        recipient is not specified, since it is added in the page
        editor):</p><pre class="programlisting">Name
sendername

E-mail
email
sender

Message
textarea
messagebody

Send Now
submit</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_most_visited"></a>1.18.&nbsp;Most Visited</h3></div></div></div><p>The most visited module shows the first words of the pages that
        have been viewed more times in the latest days, adding links to go to
        the full pages. Pages are searched in subdirectories too.</p><p>Argument: path to a directory. If not provided, defaults to the
        directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>css</code></em>: the name of a css class;</p></li><li><p><em class="parameter"><code>date</code></em>: the type of file date to be
            shown. Possible values are <code class="option">none</code> (default),
            <code class="option">normal</code> (date only) and <code class="option">full</code>
            (date and time);</p></li><li><p><em class="parameter"><code>words</code></em>: defines the number of words to
            show for each page (default <code class="option">50</code>).</p></li><li><p><em class="parameter"><code>items</code></em>: defines the number of pages to
            show (default <code class="option">5</code>);</p></li><li><p><em class="parameter"><code>minvisits</code></em>: minimum number of page
            views that a page must have to be included in the list (default
            <code class="option">0</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_parse"></a>1.19.&nbsp;Parse</h3></div></div></div><p>The parse module includes a list of files using the
        <code class="code">pageContext.include()</code> Java method.</p><p>Argument: path to a file or directory. If not provided, the
        module does nothing.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_site_map"></a>1.20.&nbsp;Site Map</h3></div></div></div><p>The site map module creates a site map using an HTML unordered
        list.</p><p>Argument: path to a directory. If not provided, the site map
        will start from the directory that contains the current page.</p><p>Advanced parameters:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>allowHiding</code></em>: defines if the module
            honours the "hide submenu" option or not. Values are
            <code class="option">false</code> (default) and <code class="option">true</code>;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="module_video_player"></a>1.21.&nbsp;Video Player</h3></div></div></div><p>The video player module shows a FLV video player using the
        Flash-based <a class="ulink" href="http://flowplayer.sourceforge.net/" target="_top">FlowPlayer</a>. It will
        play all the FLV files that are available in the directory passed as
        argument.</p><p>Argument: path to a file or directory. If not provided, defaults
        to the directory that contains the current page.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="tag_library"></a>Chapter&nbsp;7.&nbsp;Tag Library</h2></div></div></div><p>MeshCMS provides a library of custom tags to ease the creation of
    themes. Some are mandatory, others can be useful in many situations. The
    following sections explain each tag separately. As an example, the
    <code class="code">&lt;mesh:tagname&gt;</code> format is used, which implies the
    following declaration at the beginning of the theme file:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="mesh" %&gt;</pre><p>Mandatory tags are: <a class="link" href="#tag_editor" title="1.1.&nbsp;editor">editor</a>, <a class="link" href="#tag_pagehead" title="1.2.&nbsp;pagehead">pagehead</a> and <a class="link" href="#tag_pagebody" title="1.3.&nbsp;pagebody">pagebody</a>.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_mandatory"></a>1.&nbsp;Mandatory Tags</h2></div></div></div><p>These tags must be included in all themes.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_editor"></a>1.1.&nbsp;editor</h3></div></div></div><p>This tag is <span class="emphasis"><em>mandatory</em></span> and must enclose all
        tags of type <code class="code">pagebody</code>, <code class="code">module</code> and
        <code class="code">mailform</code> in the theme file. Since these three tags are
        always used inside the HTML <code class="code">&lt;body&gt;</code> tag, usually the
        <code class="code">editor</code> is inserted immediately after the
        <code class="code">&lt;body&gt;</code>:</p><pre class="programlisting">&lt;html&gt;
...
&lt;body&gt;&lt;mesh:editor&gt;
... body content...
&lt;/mesh:editor&gt;&lt;/body&gt;
&lt;/html&gt;</pre><p>The purpose of this tag is to insert a <code class="code">&lt;form&gt;</code>
        element when the page is being edited. For that reason, you must also
        enclose any other <code class="code">&lt;form&gt;</code> tag into a
        <code class="code">ifnotediting</code> tag, so your forms won't be shown during
        page editing (HTML does not allow nested forms).</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_pagehead"></a>1.2.&nbsp;pagehead</h3></div></div></div><p>Inserts some headers found in the page. This tag is
        <span class="emphasis"><em>mandatory</em></span> since it is needed when editing
        pages.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>dropScripts</code></em>: if
            <code class="option">true</code>, <code class="code">&lt;script&gt;</code> tags are
            discarded (default <code class="option">false</code>);</p></li><li><p><em class="parameter"><code>dropStyles</code></em>: if <code class="option">true</code>,
            <code class="code">&lt;style&gt;</code> tags are discarded (default
            <code class="option">false</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_pagebody"></a>1.3.&nbsp;pagebody</h3></div></div></div><p>Inserts the body of the page. This tag is
        <span class="emphasis"><em>mandatory</em></span> since it is needed when editing pages
        (it makes no sense to have a theme that does not show the contents of
        the page anyway). This tag has no attributes.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_page_design"></a>2.&nbsp;Page Design Tags</h2></div></div></div><p></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_setlocale"></a>2.1.&nbsp;setlocale</h3></div></div></div><p>Sets a locale that will be used in the page. Other MeshCMS
        components will refer to that locale to display some string such as
        dates, mail form field names and so on.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>value</code></em>: the locale name. Please note
            that this attribute is <span class="emphasis"><em>not</em></span> required. If not
            provided, it will be searched in the path of the requested page,
            starting from left to right. For example, if the URL is
            <code class="uri">http://www.site.com/web/en/products/index.html</code>, the
            locale will be set to
            <em class="parameter"><code><em class="parameter"><code>en</code></em></code></em>. If no valid
            locale is found in the page path, no locale will be set;</p></li><li><p><em class="parameter"><code>defaultValue</code></em>: same as
            <em class="parameter"><code>value</code></em>, but will be set only if not found in
            the URL;</p></li><li><p><em class="parameter"><code>redirectRoot</code></em>: if
            <code class="option">true</code>, and if a language is available, the root
            page is automatically redirected to one of the language
            roots.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_defaultcss"></a>2.2.&nbsp;defaultcss</h3></div></div></div><p>Creates a link to the default style sheets for that page and for
        the additional. You can use it (recommended) or import/link styles as
        usual. This tag has no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_contextpath"></a>2.3.&nbsp;contextpath</h3></div></div></div><p>Inserts the context path, i.e. the value of
        <code class="code">HttpServletRequest.getContextPath()</code>. Useful for absolute
        paths, since the context path might be added when the web application
        context is not root in its host. This tag has no attributes.</p><div class="example"><a name="N10A65"></a><p class="title"><b>Example&nbsp;7.1.&nbsp;An absolute link</b></p><div class="example-contents"><pre class="programlisting">&lt;a href="&lt;mesh:contextpath /&gt;/dir/page.html"&gt;An absolute link&lt;/a&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_themepath"></a>2.4.&nbsp;themepath</h3></div></div></div><p>Inserts the complete path of the directory that contains the
        current theme. Very useful to insert files of the theme itself. This
        tag has no attributes.</p><div class="example"><a name="N10A71"></a><p class="title"><b>Example&nbsp;7.2.&nbsp;Insert an image located in the theme directory</b></p><div class="example-contents"><pre class="programlisting">&lt;img src="&lt;mesh:themepath /&gt;/logo.jpg"&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_adminpath"></a>2.5.&nbsp;adminpath</h3></div></div></div><p>Inserts the complete path of the admin directory. This tag has
        no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_searchfile"></a>2.6.&nbsp;searchfile</h3></div></div></div><p>Finds a file by name in the page directory, going up to the root
        until the file is found.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>name</code></em>: the file name
            (required);</p></li><li><p><em class="parameter"><code>defaultName</code></em>: a default file to be
            used if the searched file is not found. This default file is
            supposed to exist in the theme directory;</p></li><li><p><em class="parameter"><code>include</code></em>: if <code class="option">true</code>,
            the contents of the file are included, otherwise the file path is
            inserted.</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_page_elements"></a>3.&nbsp;Page Elements Tags</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_pagetitle"></a>3.1.&nbsp;pagetitle</h3></div></div></div><p>This tag prints the title of the page. It has one
        attribute:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>default</code></em>: default title to be used
            when the page has no title. This attribute is optional and its
            default value is <code class="code">&amp;nbsp;</code>.</p></li></ul></div><div class="example"><a name="N10AAF"></a><p class="title"><b>Example&nbsp;7.3.&nbsp;A simple title</b></p><div class="example-contents"><pre class="programlisting">&lt;title&gt;My Site: &lt;mesh:pagetitle /&gt;&lt;/title&gt;</pre></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>the use of <code class="code">pagetitle</code> is not limited to the HTML
          <code class="code">&lt;title&gt;</code> tag: you can use it elsewhere to repeat
          the title of the page, and you can use anything else within the HTML
          <code class="code">&lt;title&gt;</code> tag.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_module"></a>3.2.&nbsp;module</h3></div></div></div><p>This tag allows to include a <a class="link" href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">module</a> in the place where it is located in
        the page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>name</code></em>: the description of the module
            content, in the form <code class="option">template:argument</code>. The
            template can be omitted: in this case the colon can be omitted
            too, and the Include template will be used. The fact that this
            attribute is called name can be misleading: it is a heritage of a
            previous version;</p></li><li><p><em class="parameter"><code>date</code></em>: the format of the date. This is
            passed to the include template and might be used or not (for
            example <code class="classname">Include</code> uses it). Possible values
            are <code class="option">none</code> (default), <code class="option">normal</code> and
            <code class="option">full</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style. This is passed to
            the include template and might be used or not (for example
            <code class="classname">Include</code> uses it). Default is no
            style;</p></li><li><p><em class="parameter"><code>location</code></em> (required): the name of the
            module location. <span class="emphasis"><em>All modules in a theme must have
            different location names</em></span>;</p></li><li><p><em class="parameter"><code>alt</code></em>: a string that is inserted when
            the module is not used (default
            <code class="option">&amp;nbsp;</code>);</p></li><li><p><em class="parameter"><code>parameters</code></em>: a string that contains
            advanced module parameters and their values.</p></li></ul></div><div class="example"><a name="N10B0A"></a><p class="title"><b>Example&nbsp;7.4.&nbsp;A fixed module that includes some files located in the
          <code class="filename">/include/news</code> directory</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:module location="news" name="includes/news" date="normal" style="news" /&gt;</pre></div></div><br class="example-break"><div class="example"><a name="N10B14"></a><p class="title"><b>Example&nbsp;7.5.&nbsp;A module that can be configured while editing the
          page</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:module location="bottom" /&gt;</pre></div></div><br class="example-break"><div class="example"><a name="N10B1A"></a><p class="title"><b>Example&nbsp;7.6.&nbsp;A module that shows a site map starting from the directory of
          the page, using <code class="code">(none)</code> to pass an empty
          argument:</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:module location="sitemap" name="site_map:(none)" /&gt;</pre></div></div><br class="example-break"><p>A note about locations: suppose to edit some pages using a theme
        that contains two configurable modules, whose locations are left and
        bottom. Modules will be saved in the page with those location names.
        If you change theme, those modules will appear if the new theme
        contains configurable modules with the same location names. So it
        suggested to use common names for module locations. This is a possible
        convention:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="option">left</code> for a module in the left
            column;</p></li><li><p><code class="option">right</code> for a module in the right
            column;</p></li><li><p><code class="option">top</code> for a module at the top of the
            page;</p></li><li><p><code class="option">bottom</code> for a module at the bottom of the
            page;</p></li><li><p>numbers for modules below others (<code class="option">left2</code>,
            <code class="option">right2</code>, etc.)</p></li></ul></div><p>There's no limit to the number of modules that can be specified
        in a theme.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_moduletitle"></a>3.3.&nbsp;moduletitle</h3></div></div></div><p>This tag displays the title of a <a class="link" href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">module</a>.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>location</code></em> (required): the name of the
            module location;</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the
            date. It won't be added if the title is not shown;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the
            date. It won't be added if the title is not shown.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_adminmenu"></a>3.4.&nbsp;adminmenu</h3></div></div></div><p>This tag inserts a menu to access some specific MeshCMS
        functions when the user has logged in:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Control Panel</strong></span>: a link to
            the Control Panel;</p></li><li><p><span class="bold"><strong>Edit this page</strong></span>: a link to
            edit the current page visually;</p></li><li><p><span class="bold"><strong>Edit source</strong></span>: a link to edit
            the source of the current page;</p></li><li><p><span class="bold"><strong>Clean HTML</strong></span>: a link to edit
            the source of the current page after having it cleaned with jTidy,
            that tries to convert any page into well-formed XHTML;</p></li><li><p><span class="bold"><strong>New page</strong></span>: a link to create
            a new page at the same level of the current one;</p></li><li><p><span class="bold"><strong>New child page</strong></span>: a link to
            create a new child page.</p></li></ul></div><p>Some links won't appear if they are not appropriate. If no user
        has logged in, the behavior depends on the mode attribute. You should
        always use this tag in a theme, since it offers the most comfortable
        way to edit pages.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>mode</code></em>: what to display before a user
            has logged in. There are 2 possible values:
            <code class="option">normal</code> (default) displays a link to the login
            page and <code class="option">hidden</code> shows nothing.</p></li><li><p><em class="parameter"><code>separator</code></em>: the text between elements
            (default is a space);</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default
            is no style).</p></li></ul></div><div class="example"><a name="N10BAC"></a><p class="title"><b>Example&nbsp;7.7.&nbsp;A vertical admin menu</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:adminmenu separator="&lt;br /&gt;" /&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_mailform"></a>3.5.&nbsp;mailform</h3></div></div></div><p>Creates a standard form to send e-mail messages. This can be
        used to receive a feedback from visitors. The form will only appear in
        pages that have a recipient specified (it can be set when editing the
        page). This tag has no attributes.</p><p>Starting from MeshCMS 3.0, the same functionality can be
        achieved by using the <a class="link" href="#module_mail" title="1.17.&nbsp;Mail">mail module</a>
        and specifying the e-mail address as argument, so it's up to the theme
        designer to decide if it is worth to use this tag.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_navigation"></a>4.&nbsp;Navigation Tags</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_listmenu"></a>4.1.&nbsp;listmenu</h3></div></div></div><p>Creates a navigation menu using an HTML unordered list.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>path</code></em>: the path used as root for the
            menu. Defaults to the path of the page to which the theme is
            applied. There are some special values that can be used with this
            parameters: <code class="option">root</code> (site root),
            <code class="option">current</code> (directory of the page) and
            <code class="option">parent</code> (parent directory). Should you really need
            to specify a path that is equal to one of these special values,
            simply put a slash at the beginning (e.g.
            <code class="option">/current</code>);</p></li><li><p><em class="parameter"><code>items</code></em>: a comma-separated list of
            categories of pages to be added to the menu. Possible values are
            <code class="option">all</code> or any combination of
            <code class="option">firstlevel</code> (pages in the directory defined by
            path), <code class="option">lastlevel</code> (pages at the level of the
            current page), <code class="option">intermediatelevels</code> (all levels
            between first and last), <code class="option">onpath</code> (pages along the
            current page path, like breadcrumbs) and <code class="option">children</code>
            (pages that are children of the current page). The default value
            is <code class="option">firstlevel,lastlevel,onpath,children</code>;</p></li><li><p><em class="parameter"><code>current</code></em>: indicates how to display the
            current page in the menu. Possible values are
            <code class="option">text</code> (default) and <code class="option">link</code>.</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for menu elements
            (default is no style);</p></li><li><p><em class="parameter"><code>currentStyle</code></em>: a css style for the
            current page (default is no style);</p></li><li><p><em class="parameter"><code>currentPathStyle</code></em>: a css style for
            pages on path (default is no style);</p></li><li><p><em class="parameter"><code>allowHiding</code></em>: if
            <code class="option">true</code>, tells the menu to obey to the hiding
            settings specified in the <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page
            Manager</a>, i.e. hide submenus that are set to be hidden
            (default <code class="option">false</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_alibmenu"></a>4.2.&nbsp;alibmenu</h3></div></div></div><p>Creates a navigation menu using an HTML unordered list and the
        ALIB script. The same result could be achieved by including the script
        in the theme and using listmenu with appropriate parameters, but this
        solution is more straightforward.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>part</code></em>: the part of code. Possible
            values are <code class="option">head</code> and <code class="option">body</code>. You
            must use both values (the former within the head tag, the latter
            within the body tag, where you want to insert the menu);</p></li><li><p><em class="parameter"><code>orientation</code></em>: the type of menu.
            Possible values are <code class="option">vertical</code> and
            <code class="option">horizontal</code>.</p></li><li><p><em class="parameter"><code>path</code></em>: the path used as root for the
            menu. Defaults to the path of the page to which the theme is
            applied;</p></li><li><p><em class="parameter"><code>current</code></em>: indicates how to display the
            current page in the menu. Possible values are
            <code class="option">text</code> (default) and <code class="option">link</code>.</p></li><li><p><em class="parameter"><code>currentPathStyle</code></em>: a css style for
            pages on path (default is no style);</p></li><li><p><em class="parameter"><code>allowHiding</code></em>: if
            <code class="option">true</code>, tells the menu to obey to the hiding
            settings specified in the <a class="link" href="#page_manager" title="1.&nbsp;Page Manager">Page
            Manager</a>, i.e. hide submenus that are set to be hidden
            (default <code class="option">true</code>).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_simplemenu"></a>4.3.&nbsp;simplemenu</h3></div></div></div><p>Creates a simple textual menu, similar to a typical CMS menu
        (first level + path to current level + current level).</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>path</code></em>: the path used as root for the
            menu. Defaults to the path of the page to which the theme is
            applied;</p></li><li><p><em class="parameter"><code>space</code></em>: the number of pixels used to
            indent the menu. Default is <code class="option">8</code>;</p></li><li><p><em class="parameter"><code>bullet</code></em>: the HTML code used as bullet
            in the menu. Default is <code class="option">&amp;middot;</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for menu elements
            (default is no style);</p></li><li><p><em class="parameter"><code>expand</code></em>: set this to
            <code class="option">true</code> to expand the intermediate levels of the
            menu (by default it is <code class="option">false</code> and only expands the
            first and last levels).</p></li><li><p><em class="parameter"><code>allowHiding</code></em>: defines if the module
            honours the "hide submenu" option or not. Values are
            <code class="option">false</code> (default) and <code class="option">true</code>;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_tigramenu"></a>4.4.&nbsp;tigramenu</h3></div></div></div><p>Creates a JavaScript menu (using <a class="ulink" href="http://www.softcomplex.com/products/tigra_menu/" target="_top">this free
        script</a>). This script needs to insert some code in the head tag
        and some in the body tag, so you must call this tag twice in the same
        page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>part</code></em>: the part of code. Possible
            values are <code class="option">head</code> and <code class="option">body</code>. You
            must use both values (the former within the head tag, the latter
            within the body tag);</p></li><li><p><em class="parameter"><code>path</code></em>: the path used as root for the
            menu. Defaults to the path of the page to which the theme is
            applied. Use this attribute when <em class="parameter"><code>part</code></em> has
            the <code class="option">head</code> value;</p></li><li><p><em class="parameter"><code>placeholder</code></em>: a boolean value to
            include a transparent image with the size of the menu. This is
            useful when the layout of the page does not use absolute
            positioning as the script does. Default is <code class="option">false</code>.
            Use this attribute olny when <em class="parameter"><code>part</code></em> has the
            <code class="option">body</code> value.</p></li><li><p><em class="parameter"><code>allowHiding</code></em>: defines if the module
            honours the "hide submenu" option or not. Values are
            <code class="option">false</code> (default) and <code class="option">true</code>;</p></li></ul></div><p>If you use this tag in a theme, you must include the files
        <code class="filename">menu.js</code>, <code class="filename">menu_tpl.js</code> and
        <code class="filename">menu.css</code> in the same directory of the
        <code class="filename">main.jsp</code> theme file.
        <code class="filename">menu_tpl.js</code> and <code class="filename">menu.css</code> can
        be customized to get the desired result, as videly illustrated in the
        documentation of the script.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_breadcrumbs"></a>4.5.&nbsp;breadcrumbs</h3></div></div></div><p>Creates a list of titles/links for all the pages from the site
        root (included) to the current page (can be excluded).
        Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>separator</code></em>: the text between elements
            (default is a space);</p></li><li><p><em class="parameter"><code>mode</code></em>: the type of breadcrumbs.
            Possible values are <code class="option">titles</code> (default) and
            <code class="option">links</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default
            is no style);</p></li><li><p><em class="parameter"><code>target</code></em>: the target for links (default
            is no target, hence same window);</p></li><li><p><em class="parameter"><code>current</code></em>: boolean value to
            include/exclude the current page (default is
            <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the
            first element. It won't be added if there are no elements at
            all;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the
            last element. It won't be added if there are no elements at
            all.</p></li></ul></div><div class="example"><a name="N10D44"></a><p class="title"><b>Example&nbsp;7.8.&nbsp;The most common breadcrumbs</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:breadcrumbs mode="links" pre="You are viewing: " separator=" &amp;raquo; " /&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_links"></a>4.6.&nbsp;links</h3></div></div></div><p>Creates a list of links to pages in the same level (i.e.
        directory).</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>path</code></em>: the path where to find pages to
            list (defaults to the path of the current page);</p></li><li><p><em class="parameter"><code>welcome</code></em>: if <code class="option">true</code>,
            the welcome page in the directory is included too (default
            <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>separator</code></em>: the text between elements
            (default is a space);</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default
            is no style);</p></li><li><p><em class="parameter"><code>target</code></em>: the target for links (default
            is no target, hence same window);</p></li><li><p><em class="parameter"><code>current</code></em>: boolean value to
            include/exclude the current page (default is
            <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the
            first element. It won't be added if there are no elements at
            all;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the
            last element. It won't be added if there are no elements at
            all.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_langmenu"></a>4.7.&nbsp;langmenu</h3></div></div></div><p>Creates a list of links to available languages in the site.
        Please note that this feature only works if the site has a specific
        structure (see <a class="xref" href="#multilingual" title="2.&nbsp;Multilingual sites">Section&nbsp;2, &ldquo;Multilingual sites&rdquo;</a>). That menu will allow
        site visitors to jump to the same page in another language or, if that
        page is not available, to the home page of the other language. In the
        last case, if the user has logged in and has required permissions, he
        will be offered to create the translation on the fly.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>separator</code></em>: the text between elements
            (default is a space);</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the
            first element. It won't be added if there are no elements at
            all;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the
            last element. It won't be added if there are no elements at
            all;</p></li><li><p><em class="parameter"><code>names</code></em>: if <code class="option">true</code>,
            language names are shown (default <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>flags</code></em>: if <code class="option">true</code>,
            small flags are shown (default <code class="option">false</code>).</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_information"></a>5.&nbsp;Information Tags</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_info"></a>5.1.&nbsp;info</h3></div></div></div><p>This tag shows some info about the website or the CMS. Values
        are defined in the Configuration page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>id</code></em>: indicates which site information
            must be shown.</p><p>Possible values are <code class="option">name</code> (default),
            <code class="option">host</code> (or <code class="option">domain</code>),
            <code class="option">description</code>, <code class="option">keywords</code>,
            <code class="option">author</code> or <code class="option">authorurl</code>.</p><p>Alternatively, you can retrieve some system info using
            <code class="option">meshcms</code> to retrieve application name and version
            info, <code class="option">charset</code> to get the system charset or
            <code class="option">lang</code> to get the page language.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_user"></a>5.2.&nbsp;user</h3></div></div></div><p>This tag shows some info about the current user.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>id</code></em>: indicates which user information
            must be shown. Value can be <code class="option">username</code>,
            <code class="option">e-mail</code> (or <code class="option">email</code>), or another
            user detail (<code class="option">salutation</code>, <code class="option">name</code>,
            <code class="option">surname</code>, <code class="option">company</code>,
            <code class="option">address</code>, <code class="option">zip</code>,
            <code class="option">city</code>, <code class="option">state</code>,
            <code class="option">country</code>, <code class="option">phone_number</code>,
            <code class="option">fax_number</code>,
            <code class="option">mobile_phone_number</code>). If
            <em class="parameter"><code>id</code></em> is not specified, the value displayed
            depends on what information is available.</p></li></ul></div><div class="example"><a name="N10E37"></a><p class="title"><b>Example&nbsp;7.9.&nbsp;Welcoming a user when he has logged in</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:ifuser&gt;Welcome &lt;mesh:user /&gt;!&lt;/mesh:ifuser&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_lastmodified"></a>5.3.&nbsp;lastmodified</h3></div></div></div><p>Writes the date of the last modification of the current page.
        Usually this is the last modification time of the HTML file, but some
        modules can change that value. For example, if the gallery module is
        used in the page, and an image is newer than the HTML file, its
        modification time will be used, provided that the module tag is
        located before this tag in the theme. This means that it is
        recommended to put this tag at the end of the page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>date</code></em>: the format of the date.
            Possible values are <code class="option">normal</code> (default) and
            <code class="option">full</code>;</p></li><li><p><em class="parameter"><code>mode</code></em>: since usually it makes no sense
            to use this tag for server-side pages (e.g. JSPs), you can set
            this attribute to <code class="option">static</code> (default) to show the
            date for static files only, or you can use <code class="option">all</code> to
            always show it;</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the
            date. It won't be added if the date is not shown;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the
            date. It won't be added if the date is not shown;</p></li><li><p><em class="parameter"><code>update</code></em>: if <code class="option">true</code>, the
            last modification time of the page file will be modified according
            to the displayed value (default <code class="option">false</code>).</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tags_conditional"></a>6.&nbsp;Conditional Tags</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_iflang"></a>6.1.&nbsp;iflang</h3></div></div></div><p>This tag can be used to show some html in a particular language
        only.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>id</code></em>: the code of the desired language
            (e.g. <code class="option">en</code> for English).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifuser"></a>6.2.&nbsp;ifuser, ifnotuser</h3></div></div></div><p>These tags mark a part of the page that must be shown only when
        a user has logged in or not.</p><p>These tags have no attributes.</p><div class="example"><a name="N10E94"></a><p class="title"><b>Example&nbsp;7.10.&nbsp;Displaying a message to a user</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:ifuser&gt;Welcome &lt;mesh:user /&gt;!&lt;/mesh:ifuser&gt;
&lt;mesh:ifnotuser&gt;You are not logged in&lt;/mesh:ifnotuser&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifediting"></a>6.3.&nbsp;ifediting, ifnotediting</h3></div></div></div><p>These tags are used to mark a part of the page that must be
        shown only when editing or viewing a page.</p><p>These tags have no attributes.</p><p>The <code class="code">ifnotediting</code> tag is mainly used to enclose
        forms that would otherwise conflict with the main editing form.</p><div class="example"><a name="N10EA7"></a><p class="title"><b>Example&nbsp;7.11.&nbsp;Inserting a search form without conflicting with the MeshCMS
          editor</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:ifnotediting&gt;
 &lt;!-- Search Google --&gt;
  &lt;center&gt;
   &lt;FORM method=GET action="http://www.google.com/search"&gt;
    &lt;input type=hidden name=ie value=UTF-8&gt;
    &lt;input type=hidden name=oe value=UTF-8&gt;
    &lt;TABLE bgcolor="#FFFFFF"&gt;&lt;tr&gt;&lt;td&gt;
     &lt;A HREF="http://www.google.com/"&gt;
     &lt;IMG SRC="http://www.google.com/logos/Logo_40wht.gif" 
      border="0" ALT="Google" align="absmiddle"&gt;&lt;/A&gt;
     &lt;INPUT TYPE=text name=q size=25 maxlength=255 value=""&gt;
     &lt;INPUT type=submit name=btnG VALUE="Google Search"&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/TABLE&gt;
   &lt;/FORM&gt;
  &lt;/center&gt;
 &lt;!-- Search Google --&gt;
&lt;/mesh:ifnotediting&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifmodule"></a>6.4.&nbsp;ifmodule, ifnotmodule</h3></div></div></div><p>These tags are used to display a part of the page only when the
        specified module is active or not.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>location</code></em> (required): the name of the
            module location.</p></li></ul></div><div class="example"><a name="N10EBC"></a><p class="title"><b>Example&nbsp;7.12.&nbsp;Adding some HTML around a module</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:ifmodule location="bottom"&gt;
 &lt;div align="center"&gt;Module title&lt;/div&gt;
 &lt;mesh:module location="bottom" /&gt;
 &lt;div align="center"&gt;End of module&lt;/div&gt;
&lt;/mesh:ifmodule&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifmailform"></a>6.5.&nbsp;ifmailform, ifnotmailform</h3></div></div></div><p>These tags are used to display a part of the page only if a
        recipient has been specified to receive messages from that
        page.</p><p>These tags have no attributes.</p><div class="example"><a name="N10ECA"></a><p class="title"><b>Example&nbsp;7.13.&nbsp;Adding some HTML around a mail form</b></p><div class="example-contents"><pre class="programlisting">&lt;mesh:ifmailform&gt;
 &lt;div align="center"&gt;Send a message&lt;/div&gt;
 &lt;mesh:mailform /&gt;
&lt;/mesh:ifmailform&gt;</pre></div></div><br class="example-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifindexed"></a>6.6.&nbsp;ifindexed, ifnotindexed</h3></div></div></div><p>These tags detect whether the current page is in the site map or
        not.</p><p>These tags have no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="tag_ifadminpage"></a>6.7.&nbsp;ifadminpage, ifnotadminpage</h3></div></div></div><p>These tags detect whether the current page is an admin page or
        not. They are useful when the theme is applied to admin pages.</p><p>These tags have no attributes.</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="N10EE0"></a>Chapter&nbsp;8.&nbsp;Tips</h2></div></div></div><p>This is a collection of tips that don't fit into any of the previous
    chapters.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tinymce_config"></a>1.&nbsp;TinyMCE configuration</h2></div></div></div><p>MeshCMS includes TinyMCE with a selection of plugins and a default
      configuration. If you want to customize TinyMCE, you have two
      options:</p><div class="orderedlist"><ol type="1"><li><p>create your own <code class="filename">tinymce_init.js</code> file in
          the CMS directory (which defaults to /meshcms). The default version
          of that file is contained in
          <code class="filename">/meshcms/admin/scripts</code>;</p></li><li><p>use another TinyMCE version, with the plugins you want, by
          putting it into the CMS directory (e.g.
          <code class="filename">/meshcms/tiny_mce</code>).</p></li></ol></div><p>You can apply both customizations if you want, i.e. using a
      different TinyMCE version with your own configuration.</p><p>It is not recommended to replace the TinyMCE version shipped with
      MeshCMS, nor to change the default configurations, as your changes would
      be lost when upgrading to a new MeshCMS version.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="multilingual"></a>2.&nbsp;Multilingual sites</h2></div></div></div><p>Since MeshCMS pages are simple HTML files, a page cannot contain
      multiple versions of itself, so different languages must be managed
      separately. Nevertheless, MeshCMS offers some expedients to deal with
      multiple languages.</p><p>Multilanguage support is based on building identical (or at least
      similar) trees of pages under pages at the first level that will have
      the path equal to language codes. If you follow that structure, pages
      that differ only at the first level will be matched as different
      versions of the same page.</p><p>To make it easier to understand, let's see an example. Suppose
      that you have to create a site in two languages: English and Italian.
      Here are the steps to follow:</p><div class="orderedlist"><ol type="1"><li><p>start with a welcome page that offers a language choice, or
          enable automatic home page redirection in the <a class="link" href="#configure" title="2.&nbsp;Configure">configuration</a>;</p></li><li><p>create a directory for each language, making sure that the
          each directory is named after a language code (i.e. <code class="code">en</code>
          and <code class="code">it</code> in our example);</p></li><li><p>in your theme, use the <a class="link" href="#tag_setlocale" title="2.1.&nbsp;setlocale">setlocale</a> tag without specifying the
          <em class="parameter"><code>value</code></em> attribute. This way the locale code
          will be taken from the url, and will be <code class="code">en</code> or
          <code class="code">it</code> according to the page that is currently displayed
          (you can use the <code class="option">defaultValue</code> attribute to set a
          default);</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/ml_file_manager.png" align="middle"></div></div></li><li><p>apply the theme to both home pages, so navigation menus will
          start from the language root instead of the site root;</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/ml_page_manager.png" align="middle"></div></div></li><li><p>finally, use the <a class="link" href="#tag_langmenu" title="4.7.&nbsp;langmenu">langmenu</a>
          tag to add a menu of languages to your theme (you could also use a
          customized one, but this tool is handy since it points directly to
          the translated page if available).</p></li></ol></div><p>This way you get a site that separates languages correctly. You
      could also put common images in a directory at the root level (e.g.
      <code class="filename">/images</code>).</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/ml_eng_home.png" align="middle"></div></div></div></div></div></body></html>