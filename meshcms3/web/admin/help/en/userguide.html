<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>MeshCMS User Guide</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><meta name="description" content="MeshCMS is a simple content management system written in Java. This guide illustrates the most common operations that MeshCMS users will need to learn, from installation to daily usage."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>MeshCMS User Guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Luciano</span> <span class="surname">Vernaschi</span></h3></div></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>MeshCMS is a simple content management system written in Java. This guide illustrates the most common operations that MeshCMS users will need to learn, from installation to daily usage.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#install">2. Installation</a></span></dt><dd><dl><dt><span class="section"><a href="#install_basic">1. Basic Procedures</a></span></dt><dt><span class="section"><a href="#upgrade">2. A strategy to manage MeshCMS installation and upgrade</a></span></dt><dt><span class="section"><a href="#apache">3. Using MeshCMS with Apache</a></span></dt><dt><span class="section"><a href="#file_structure">4. File Structure</a></span></dt></dl></dd><dt><span class="chapter"><a href="#basic_concepts">3. Basic Concepts</a></span></dt><dd><dl><dt><span class="section"><a href="#site_map">1. The Site Map</a></span></dt><dt><span class="section"><a href="#external_tools">2. External Documents and Tools</a></span></dt></dl></dd><dt><span class="chapter"><a href="#common_tasks">4. Common Tasks</a></span></dt><dd><dl><dt><span class="section"><a href="#create_theme">1. Create a Theme</a></span></dt><dd><dl><dt><span class="section"><a href="#theme_main_file">1.1. The Theme Main File</a></span></dt></dl></dd><dt><span class="section"><a href="#create_mail_form">2. Create a Mail Form</a></span></dt><dt><span class="section"><a href="#edit_page">3. Edit a Page</a></span></dt><dt><span class="section"><a href="#create_new_page">4. Create a New Page</a></span></dt></dl></dd><dt><span class="chapter"><a href="#control_panel">5. Control Panel</a></span></dt><dd><dl><dt><span class="section"><a href="#file_manager">1. File Manager</a></span></dt><dd><dl><dt><span class="section"><a href="#upload">1.1. Upload</a></span></dt><dt><span class="section"><a href="#unzip">1.2. Unzip</a></span></dt></dl></dd><dt><span class="section"><a href="#manage_pages">2. Manage Pages</a></span></dt><dt><span class="section"><a href="#edit_profile">3. Edit Profile</a></span></dt><dt><span class="section"><a href="#new_user">4. New User</a></span></dt><dt><span class="section"><a href="#configure">5. Configure</a></span></dt></dl></dd><dt><span class="chapter"><a href="#modules">6. Modules</a></span></dt><dd><dl><dt><span class="section"><a href="#standard_modules">1. Standard Modules</a></span></dt></dl></dd><dt><span class="chapter"><a href="#tag_library">7. Tag Library</a></span></dt><dd><dl><dt><span class="section"><a href="#tag_editor">1. &lt;cms:editor&gt;</a></span></dt><dt><span class="section"><a href="#tag_pagehead">2. &lt;cms:pagehead&gt;</a></span></dt><dt><span class="section"><a href="#tag_pagebody">3. &lt;cms:pagebody&gt;</a></span></dt><dt><span class="section"><a href="#tag_pagetitle">4. &lt;cms:pagetitle&gt;</a></span></dt><dt><span class="section"><a href="#tag_breadcrumbs">5. &lt;cms:breadcrumbs&gt;</a></span></dt><dt><span class="section"><a href="#tag_defaultcss">6. &lt;cms:defaultcss&gt;</a></span></dt><dt><span class="section"><a href="#tag_contextpath">7. &lt;cms:contextpath&gt;</a></span></dt><dt><span class="section"><a href="#tag_themepath">8. &lt;cms:themepath&gt;</a></span></dt><dt><span class="section"><a href="#tag_adminmenu">9. &lt;cms:adminmenu&gt;</a></span></dt><dt><span class="section"><a href="#tag_simplemenu">10. &lt;cms:simplemenu&gt;</a></span></dt><dt><span class="section"><a href="#tag_tigramenu">11. &lt;cms:tigramenu&gt;</a></span></dt><dt><span class="section"><a href="#tag_links">12. &lt;cms:links&gt;</a></span></dt><dt><span class="section"><a href="#tag_module">13. &lt;cms:module&gt;</a></span></dt><dt><span class="section"><a href="#tag_mailform">14. &lt;cms:mailform&gt;</a></span></dt><dt><span class="section"><a href="#tag_lastmodified">15. &lt;cms:lastmodified&gt;</a></span></dt><dt><span class="section"><a href="#tag_user">16. &lt;cms:user&gt;</a></span></dt><dt><span class="section"><a href="#tag_ifuser">17. &lt;cms:ifuser&gt;, &lt;cms:ifnotuser&gt;</a></span></dt><dt><span class="section"><a href="#tag_ifediting">18. &lt;cms:ifediting&gt;, &lt;cms:ifnotediting&gt;</a></span></dt><dt><span class="section"><a href="#tag_ifmodule">19. &lt;cms:ifmodule&gt;, &lt;cms:ifnotmodule&gt;</a></span></dt><dt><span class="section"><a href="#tag_ifmailform">20. &lt;cms:ifmailform&gt;, &lt;cms:ifnotmailform&gt;</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div></div><p>MeshCMS is an online editing system written in Java. It provides a set of features usually included in a CMS, but it uses a more traditional approach: pages are stored in regular HTML files and all additional features are file-based.</p><p>MeshCMS is available under the <a href="http://www.gnu.org/copyleft/gpl.html" target="_top">GPL license</a>. It has been thought as a quick tool to edit pages online, without many of the features that most CMSes offer. MeshCMS simply helps you to edit pages, manage files and create some common components like menus, breadcrumbs, mail forms, image galleries and so on. There is no database, no content approval and no versioning. Not all people need those features and those giant-sized products that require too much time to be learned and too much system resources to run. MeshCMS is essential and requires few resources: the default 64MB heap is enough to host a handful of sites.</p><p>Main features are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>file-based</strong></span> - no database needed;</p></li><li><p><span class="bold"><strong>easy to install</strong></span> - deploy meshcms.war and you're done;</p></li><li><p><span class="bold"><strong>compatible with other editors</strong></span> - since it is file-based, you can edit your files with other programs if you want, then upload them as usual;</p></li><li><p><span class="bold"><strong>cross-browser</strong></span> - tested with Internet Explorer and Firefox;</p></li><li><p><span class="bold"><strong>wysiwyg editor included</strong></span> - uses <a href="http://tinymce.moxiecode.com/" target="_top">TinyMCE</a>;</p></li><li><p><span class="bold"><strong>file manager</strong></span> with image thumbnails, file operations, clipboard, upload, download, unzip and other functions - can also be used from within the wysiwyg editor to select links and images;</p></li><li><p>support for <span class="bold"><strong>themes</strong></span> - uses <a href="http://www.opensymphony.com/sitemesh/" target="_top">SiteMesh</a> as engine;</p></li><li><p>support for <span class="bold"><strong>modules</strong></span> to create commonly used components automatically - some module templates are provided (image gallery, mail form, download list, site map and others);</p></li><li><p><span class="bold"><strong>tag library</strong></span> to create new themes easily - menus and other common components are created automatically;</p></li><li><p>optional <span class="bold"><strong>hotlinking prevention</strong></span> - inspired by <a href="http://www.alistapart.com/articles/hotlinking/" target="_top">this article</a>.</p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="install"></a>Chapter&nbsp;2.&nbsp;Installation</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_basic"></a>1.&nbsp;Basic Procedures</h2></div></div></div><p>If you want to try MeshCMS, the simplest way to get started is to copy meshcms.war into the webapps folder of your application server (e.g. <a href="http://jakarta.apache.org/tomcat/" target="_top">Tomcat</a> or <a href="http://www.caucho.com/" target="_top">Resin</a>) and open <span class="emphasis"><em>http://localhost:8080/meshcms/</em></span>.</p><p>If you want to deploy a website, you will have to configure a virtual host for it as usual. There is nothing special in the setup of MeshCMS, so please refer to the documentation of your application server to choose the configuration options that best suit your needs. For example, this is the configuration of the Cromoteca virtual host (this is just an example and might not work on some versions of Tomcat or on other application servers):</p><pre class="programlisting">&lt;Host name="cromoteca.com" debug="0" appBase="/home/tomcat/sites/cromoteca"
     unpackWARs="true" autoDeploy="false" xmlValidation="false"
     xmlNamespaceAware="false"&gt;
 &lt;Alias&gt;www.cromoteca.com&lt;/Alias&gt;
 &lt;Logger className="org.apache.catalina.logger.FileLogger"
     directory="/home/tomcat/logs/cromoteca" prefix="error_log." suffix=".txt"
     timestamp="true" /&gt;
 &lt;Valve className="org.apache.catalina.valves.AccessLogValve"
     directory="/home/tomcat/logs/cromoteca"  prefix="access_log." suffix=".txt"
     pattern='%h %l %u %t "%r" %s %b "%{user-agent}i" "%{referer}i"'
     resolveHosts="false"/&gt;
 &lt;Context path="" docBase="" debug="0" reloadable="false" allowLinking="true" /&gt;
&lt;/Host&gt;</pre><p>MeshCMS is able to create thumbnails of images, so you need to provide an environment that allows image processing. On some systems you might need to add the <code class="option">-Djava.awt.headless=true</code> option to the Java VM that runs the Servlet container.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>to use MeshCMS with <a href="http://jetty.mortbay.org/jetty/" target="_top">Jetty</a>, you must set the init parameter <em class="parameter"><code>redirectWelcome</code></em> to <em class="parameter"><code>true</code></em> for <em class="parameter"><code>org.mortbay.jetty.servlet.Default</code></em>.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>2.&nbsp;A strategy to manage MeshCMS installation and upgrade</h2></div></div></div><p>When using MeshCMS, files from the application get somewhat mixed with files that belong to the site itself. This makes the maintenance quite hard, especially when it comes the time to upgrade MeshCMS.</p><p>Personally, I use a different approach that is allowing me to manage upgrades easily, and also to manage many sites together. My strategy is applicabile on UNIX-like operating systems only, since it makes use of symbolic links. That's why I've put <code class="option">allowLinking="true"</code> in my Tomcat context definitions (see <a href="#install_basic" title="1.&nbsp;Basic Procedures">Section&nbsp;1, &#8220;Basic Procedures&#8221;</a>).</p><p>On my own server I unpacked the WAR file in a directory called <code class="filename">meshcms</code>, then I created another directory called <code class="filename">sites</code>, which contains a directory for each site I host and an additional directory called <code class="filename">symlinks</code> (names are not important of course). This is the <span><strong class="command">ls -lR</strong></span> command output for that directory:</p><pre class="programlisting">.:
total 8
lrwxrwxrwx    1 tomcat   tomcat         19 May 10 11:40 admin -&gt; ../../meshcms/admin
drwxrwxr-x    3 tomcat   tomcat       4096 May 21 14:58 WEB-INF

./WEB-INF:
total 4
lrwxrwxrwx    1 tomcat   tomcat         32 May 10 11:43 classes -&gt; ../../../meshcms/WEB-INF/classes
lrwxrwxrwx    1 tomcat   tomcat         39 May 10 11:43 decorators.xml -&gt; ../../../meshcms/WEB-INF/decorators.xml
lrwxrwxrwx    1 tomcat   tomcat         32 May 10 11:43 lib -&gt; ../../../meshcms/WEB-INF/lib
drwxrwxr-x    3 tomcat   tomcat       4096 May 19 15:36 meshcms
lrwxrwxrwx    1 tomcat   tomcat         37 May 10 11:43 sitemesh.xml -&gt; ../../../meshcms/WEB-INF/sitemesh.xml
lrwxrwxrwx    1 tomcat   tomcat         29 May 10 11:43 tlds -&gt; ../../../meshcms/WEB-INF/tlds
lrwxrwxrwx    1 tomcat   tomcat         32 May 10 11:44 web.xml -&gt; ../../../meshcms/WEB-INF/web.xml

./WEB-INF/meshcms:
total 4
lrwxrwxrwx    1 tomcat   tomcat         49 May 19 15:36 filetypes.txt -&gt; ../../../../meshcms/WEB-INF/meshcms/filetypes.txt
drwxrwxr-x    2 tomcat   tomcat       4096 May 10 12:07 users

./WEB-INF/meshcms/users:
total 0
lrwxrwxrwx    1 tomcat   tomcat         21 May 10 12:07 admin.txt -&gt; ../../../../admin.txt</pre><p>When I want to create a new site, I just need to use <span><strong class="command">cp -R <em class="replaceable"><code>symlinks</code></em> <em class="replaceable"><code>sitename</code></em></strong></span> and to create a host for the new site. Then, when I need to upgrade MeshCMS, I just replace the contents of the <code class="filename">meshcms</code> directory and restart Tomcat so that all sites will use the new version.</p><p>The link for <code class="filename">admin.txt</code> serves a different purpose: MeshCMS uses a file for each user and the name of the file is always <code class="filename"><em class="replaceable"><code>username</code></em>.txt</code>. By linking to a single <code class="filename">admin.txt</code> file placed somewhere, I can use the same account to manage all sites. This trick can be used in many situations: suppose that you want to allow a user to access two or more sites. Create the user in a site using the MeshCMS interface, then create a symlink into the <code class="filename">/WEB-INF/meshcms/users</code> directory of the other site(s). When the user will access one of the sites and will change his profile and/or his password, changes will be valid for the other site(s) too.</p><p>You can even use symlinks to share directories and files between different sites. If you symlink a directory from a site to another, all changes will be reflected immediately, and each site is allowed to use its own theme to style the pages included in that directory.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="apache"></a>3.&nbsp;Using MeshCMS with Apache</h2></div></div></div><p>MeshCMS requires a Java Servlet container to run, but often pages are served by an HTTP server. Tomcat and the Apache webserver are the most widely used respectively, so they are used as examples in this page.</p><p>There are some possible scenarios when MeshCMS must be installed on a server where pages are served by Apache.</p><div class="orderedlist"><ol type="1"><li><p>Tomcat is not available at all. Currently, there is no way to run MeshCMS in such a case. A static export feature is on the way, so it will be possible to run MeshCMS on a separate server and export the sites to Apache, which will serve them as static sites. At the moment, a similar result could be achieved with wget, but that's a tedious approach with many flaws. For example, mail forms wouldn't work, since the JSP page that sends messages won't be available.</p></li><li><p>Apache serves static pages (*.html for example), while request of type *.jsp or /servlet/* are passed to Tomcat. This is a very common scenario. If you need to use MeshCMS in that situation, you could do the following: in the configuration page, change the value of Visually editable types to jsp. This way you'll be able to use JSP files for simple HTML. Do not create *.html or *.htm files, since those files are not managed by MeshCMS in this case. You should also keep in mind that the Invoker is usually enabled on those servers, to allow to run servlets by calling /servlet/fullClassName. That configuration works with MeshCMS.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="file_structure"></a>4.&nbsp;File Structure</h2></div></div></div><p>A normal installation of MeshCMS contains:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>WEB-INF</strong></span>: contains system files (classes, libraries and configuration files);</p><div class="itemizedlist"><ul type="circle"><li><p><span class="bold"><strong>meshcms</strong></span>: contains saved items:</p><div class="itemizedlist"><ul type="square"><li><p><span class="bold"><strong>users</strong></span>: contains users data (one file per user);</p></li><li><p><span class="bold"><strong>messages</strong></span>: contains a copy of the e-mail messages that are sent through mail forms;</p></li><li><p><span class="bold"><strong>repository</strong></span>: contains backups of modified and deleted files;</p></li><li><p><span class="bold"><strong>filetypes.txt</strong></span>: contains a database of file types; fields are tab-separated;</p></li><li><p><span class="bold"><strong>siteprops.txt</strong></span>: contains saved site customization;</p></li><li><p><span class="bold"><strong>configuration.txt</strong></span>: contains saved site configuration;</p></li></ul></div></li></ul></div></li><li><p><span class="bold"><strong>admin</strong></span>: contains administrative pages, the wysiwyg editor, the default module templates and the default admin theme; you can move or rename this folder, but then you'll need to restart your web application;</p></li><li><p><span class="bold"><strong>module_templates</strong></span>: can contain your own module templates;</p></li><li><p><span class="bold"><strong>themes</strong></span>: can contain your own themes.</p></li></ul></div><p>The last two elements can be located elsewhere according to the <a href="#configure" title="5.&nbsp;Configure">Configuration</a>.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="basic_concepts"></a>Chapter&nbsp;3.&nbsp;Basic Concepts</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="site_map"></a>1.&nbsp;The Site Map</h2></div></div></div><p>The site map is one of the most important MeshCMS components. Since MeshCMS is file based, there is no site map defined in a database, so MeshCMS must figure it out by parsing the file system. The site map is not a simple list of pages: it is a hierarchical structure which follows some strict rules.</p><p>The key of the site map is the concept of <em class="firstterm">welcome file</em>. This concept is well known by webmasters. When you access <code class="uri">http://www.site.com/somefolder/somepage.html</code>, the file <code class="filename">somepage.html</code> located in the <code class="filename">/somedir</code> folder is sent to your browser. But when you access <code class="uri">http://www.site.com/somefolder/</code>, you are requesting a folder, not a file. In such case, a file with a specific name is searched into that folder and, if it is available, that file is sent to your browser. Usually this file is called <code class="filename">index.html</code>, but more than one can be specified, and the first match will be used. The default for MeshCMS is to search for <code class="filename">index.html</code>, then <code class="filename">index.htm</code> and finally <code class="filename">index.jsp</code> (you can change this by editing the <code class="filename">web.xml</code> configuration file according to the Servlet specification). The result of this convention is that accessing <code class="uri">http://www.site.com/somefolder/</code> and accessing <code class="uri">http://www.site.com/somefolder/index.html</code> will lead to the same page.</p><p>MeshCMS uses the welcome files heavily. When it encounters a folder while parsing the website tree, it checks whether that folder contains a welcome file or not. If there is no welcome file, <span class="bold"><strong>that folder is ignored</strong></span>, along with all subfolders. This means that all pages included in that folder will <span class="emphasis"><em>not</em></span> be included in the site map, and that users will not find those pages in the navigation menu.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Pages included in ignored folders are still available by using a direct link or by typing the full address in the browser location bar.</p></div><p>Why is the site map made this way? There are two main reasons. The first one is that if a folder without welcome file were included in the navigation menu, clicking on it would show a listing of the folder contents, or an error page if that listing is not allowed. So this is a way to force the use of a welcome page. The second reason is that there are many cases where a page must not be available in the navigation menu. Suppose that you want to use the <a href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">include module template</a> to add some news in your web pages. You will create a folder that will contain an HTML file for each news, and then you will use that folder as module argument. If none of the HTML files has the name of a welcome file, those news will not be inserted in the navigation menu directly, but they will still available for the module as expected. This is just an example of a situation in which a welcome file should not be used.</p><p>When a folder contains a welcome file, it is inserted in the site map, and all other items available in that folder are included as children pages. Items can be files (HTML or server-side pages) or folders (which must have their own welcome file as explained above).</p><p>This method has an important drawback: <span class="bold"><strong>a page that is not a welcome file cannot have children pages</strong></span>. For example, there is no way to add a child page to <code class="uri">http://www.site.com/somefolder/somepage.html</code>. This is usually not a problem, since you can always create a page at the same level (for example <code class="uri">http://www.site.com/somefolder/otherpage.html</code>), but if you think you will want to add children pages to a page, use a new folder for it. Keep in mind that <code class="uri">http://www.site.com/somefolder/somepage.html</code> and <code class="uri">http://www.site.com/somefolder/somepage/index.html</code> are indexed <span class="bold"><strong>exactly in the same way</strong></span>. If you create new pages using the <a href="#manage_pages" title="2.&nbsp;Manage Pages">Manage Pages</a> tool, leave the "Create enclosing folder" box checked, so you will be able to add children pages to your new page in future.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="external_tools"></a>2.&nbsp;External Documents and Tools</h2></div></div></div><p>One of the reasons that led to the creation of MeshCMS was the need to manage hundreds of HTML documents created previously, and to be able to add some Microsoft Word documents if needed. As a consequence, MehsCMS accepts any HTML file that it finds while exploring the website folder to create the site map. Thanks to the power of SiteMesh, pages created in different ways are parsed and decorated, while the title can be extracted to be used in the site menu.</p><p>Some MeshCMS users constantly upload Word documents converted to HTML, while others edit pages directly on the web using external tools like Macromedia Contribute, which they can find more comfortable than using the online editor provided by MeshCMS.</p><p>This approach has led to some choices that are different from the ones made for other CMSes. For example, there's no need to specify in which order pages must be inserted in the navigation menu. While one can prefer to take full control of that order, this is really tedious when dealing with hundreds of documents. MeshCMS automatically puts the welcome file at the beginning on the list and then orders the other pages according to the number of visits in the last days. This brings the most interesting documents at the beginning of the list.</p><p>The <a href="#manage_pages" title="2.&nbsp;Manage Pages">Manage Pages</a> tool offers an option to assign a <em class="firstterm">score</em> to each page. Pages with higher score will always come first, regardless of the count of visits. It is a tedious process to use scores to order the whole site map, and it is not a user-friendly method at all. But partial orderings are allowed: default score is zero for all pages, so one can assign a score just to those pages that he wants to see at the beginning (positive score) or at the end (negative score) of the list. Pages with the same score are ordered according to the number of visits.</p><p>Most users assign a score to first-level pages (for example: home page, company profile, products and finally contacts), while subpages are left without score.</p><p>Another consequence of the need to support documents that come from many sources is that MeshCMS does not check them for standard compliance. It respects the generalistic approach that is allowed by SiteMesh. Of course, a web developer is still allowed to put all document type definitions in his own themes and to require his users to deal with well-formed documents only.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="common_tasks"></a>Chapter&nbsp;4.&nbsp;Common Tasks</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_theme"></a>1.&nbsp;Create a Theme</h2></div></div></div><p>One of the essential features of a CMS is the ability to apply a common look &amp; feel to many pages, adding the graphics and some other components like the navigation menu. In MeshCMS you can achieve this result by using a <em class="firstterm">theme</em>. There is a special folder in MeshCMS whose default path is <code class="filename">/themes</code> (you can change that path in the <a href="#configure" title="5.&nbsp;Configure">Configuration</a>). A theme is a subfolder of <code class="filename">/themes</code> that contains all the elements needed by the theme itself. Those elements are:</p><div class="itemizedlist"><ul type="disc"><li><p>the theme main file: a JSP page named <code class="filename">main.jsp</code> that defines the common part of the pages and where the variable parts must be inserted;</p></li><li><p>the theme CSS: a CSS file named <code class="filename">main.css</code> that has the only special feature of being automatically linked from the page if the <a href="#tag_defaultcss" title="6.&nbsp;<cms:defaultcss&gt;">&lt;cms:defaultcss&gt;</a> custom tag is used. This should always be done, since using that syntax, the CSS will also be sent to the wysiwyg editor to display the page body being edited;</p></li><li><p>an additional CSS for MeshCMS specific styles (mail forms and page editor), named <code class="filename">meshcms.css</code>. If this CSS is not found in the theme, the default one will be used. You can override it if you want to change the appearance of those two components (the default is located in the <code class="filename">/admin/theme</code> folder);</p></li><li><p>any other file needed by the theme: other CSS files, images, javascripts and so on. You can then use these files in your main file by inserting the <a href="#tag_themepath" title="8.&nbsp;<cms:themepath&gt;">&lt;cms:themepath&gt;</a> tag that will be replaced with the right path to the theme folder.</p></li></ul></div><p>You can assign a theme to a page using the <a href="#manage_pages" title="2.&nbsp;Manage Pages">Manage Pages</a> tool in the Control Panel. There's no need to assign a theme to each page: if a page has no theme, the theme of the parent will be used. For example, if <code class="uri">www.yoursite.com/apage.html</code> has no theme, it will look like <code class="uri">www.yoursite.com</code>. In many cases a theme is assigned to the home page and that's all.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="theme_main_file"></a>1.1.&nbsp;The Theme Main File</h3></div></div></div><p>The main file of a theme is a JSP file that will include component of the page being shown:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="cms" %&gt;

&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;&lt;cms:pagetitle /&gt;&lt;/title&gt;
  &lt;cms:defaultcss /&gt;
  &lt;cms:pagehead /&gt;
 &lt;/head&gt;

 &lt;body&gt;
  &lt;cms:editor&gt;
   &lt;cms:pagebody /&gt;
   &lt;cms:mailform /&gt;
  &lt;/cms:editor&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre><p>This theme file is very basic, but it works: when applied to the sample MeshCMS home page, it looks this way:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/bare_viewing.png" align="middle"></div></div><p>The same basic theme can be used to edit the page:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/bare_editing.png" align="middle"></div></div><p>Now you know that a basic theme isn't complicated at all. In fact, it is a normal HTML page (which you can create with your favorite editor), that includes some <a href="#tag_library" title="Chapter&nbsp;7.&nbsp;Tag Library">custom tags</a> that will be replaced by MeshCMS with the contents of the page. This is how MeshCMS translates the page above:</p><pre class="programlisting">&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Home Page&lt;/title&gt;
  &lt;link type="text/css" rel="stylesheet" href="/meshcms/themes/bare/main.css" /&gt;
  &lt;link type="text/css" rel="stylesheet" href="/meshcms/admin/theme/meshcms.css" /&gt;
  &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
 &lt;/head&gt;

 &lt;body&gt;
  &lt;p&gt;Welcome to MeshCMS 2.0. Here is a list ...&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;</pre><p>When you create a theme, you should create a normal HTML page along with its own CSS file and images and store all files in a folder (you can use subfolders if you want). Use some text placeholder to point out where to put page components. For example, write [TITLE] where you expect to see the title of the page, [SITE MENU] where you want to see the menu, [BODY] where the text of the page should be located and so on. Please note that the notation with square brackets has nothing special. They are just placeholders. You might also use the "lorem ipsum" text instead of [BODY]. Your file might look like this one:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/theme_step1.jpg" align="middle"></div></div><p>This is the corresponding HTML code:</p><pre class="programlisting">&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;[TITLE]&lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom"
      style="background: url(flowers.jpg) no-repeat; height: 120px; padding: 10px; font-size: 22px;"&gt;[TITLE]&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;&lt;table border="0" align="center" cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[SITE MENU]&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[MESHCMS MENU]&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;[BREADCRUMBS]&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;[BODY]&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>When you are happy with your page, open it with a source code editor. Replace:</p><div class="itemizedlist"><ul type="disc"><li><p>[TITLE] with <code class="code">&lt;cms:pagetitle /&gt;</code></p></li><li><p>[SITE MENU] with <code class="code">&lt;cms:simplemenu /&gt;</code></p></li><li><p>[MESHCMS MENU] with <code class="code">&lt;cms:adminmenu /&gt;</code></p></li><li><p>[BREADCRUMBS] with <code class="code">&lt;cms:breadcrumbs /&gt;</code></p></li><li><p>[BODY] with <code class="code">&lt;cms:pagebody /&gt;</code></p></li></ul></div><p>There is a link to an image in the file: you must add <code class="code">&lt;cms:themepath /&gt;</code> before the image path so it will be found correctly. <code class="code">url(flowers.jpg)</code> becomes <code class="code">url(&lt;cms:themepath /&gt;/flowers.jpg)</code>.</p><p>Then add this line at the beginning of your file:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="cms" %&gt;</pre><p>Save your file and name it <code class="filename">main.jsp</code>. The CSS must be named <code class="filename">main.css</code> and must be located in the same folder. This folder must be located in the <code class="filename">/themes</code> folder in your site (this location can be changed in the <a href="#configure" title="5.&nbsp;Configure">Configuration</a>), and the name of the folder will be used as name of the theme itself. All images and other files must be located in the same folder. You can use subfolders, but then you need to write paths accordingly: for example, if you put all images in a subfolder called <code class="filename">images</code>, you will use <code class="code">url(&lt;cms:themepath /&gt;/images/flowers.jpg)</code> in the example above.</p><p>When your brand new decorator is available, reopen the home page of your web site and your new look &amp; feel should now be used to display the page:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/theme_step2.jpg" align="middle"></div></div><pre class="programlisting"><span class="bold"><strong>&lt;%@ taglib uri="meshcms-taglib" prefix="cms" %&gt;</strong></span>

&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;<span class="bold"><strong>&lt;cms:pagetitle /&gt;</strong></span>&lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom"
      style="background: url(<span class="bold"><strong>&lt;cms:themepath /&gt;</strong></span>/flowers.jpg) no-repeat; height: 120px; padding: 10px; font-size: 22px;"&gt;<span class="bold"><strong>&lt;cms:pagetitle /&gt;</strong></span>&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;&lt;table border="0" align="center" cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;cms:simplemenu /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;cms:adminmenu separator="&lt;br /&gt;" /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;cms:breadcrumbs /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;<span class="bold"><strong>&lt;cms:pagebody /&gt;</strong></span>&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;

&lt;/html&gt;</pre><p>There are other tags that you must add in your decorator:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="code">&lt;cms:pagehead /&gt;</code> and <code class="code">&lt;cms:defaultcss /&gt;</code> go inside the <code class="code">&lt;head&gt;</code> tag of your file to include headers and CSS;</p></li><li><p><code class="code">&lt;cms:editor&gt;...&lt;/cms:editor&gt;</code> must enclose all the contents of the <code class="code">&lt;body&gt;</code> tag;</p></li><li><p>you will probably want to add one or more modules;</p></li><li><p>other <a href="#tag_library" title="Chapter&nbsp;7.&nbsp;Tag Library">tags</a> could be useful in some cases.</p></li></ul></div><p>After these other modifications, you should get this source code:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="cms" %&gt;

&lt;html&gt;

&lt;head&gt;
  &lt;title&gt;
    &lt;cms:pagetitle /&gt;
    <span class="bold"><strong>&lt;cms:pagehead /&gt;</strong></span>
    <span class="bold"><strong>&lt;cms:defaultcss /&gt;</strong></span>
  &lt;/title&gt;
&lt;/head&gt;

&lt;body style="margin: 0px;"&gt;<span class="bold"><strong>&lt;cms:editor&gt;</strong></span>
&lt;table width="770" border="0" cellspacing="0" cellpadding="0"&gt;
  &lt;tr&gt;
    &lt;td colspan="2" valign="bottom"
      style="background: url(&lt;cms:themepath /&gt;/flowers.jpg) no-repeat; height: 120px; padding: 10px; font-size: 22px;"&gt;&lt;cms:pagetitle /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td bgcolor="#E2E0C9"&gt;&lt;table border="0" align="center" cellpadding="3" cellspacing="0"&gt;
      &lt;tr&gt;&lt;th&gt;Site Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;cms:simplemenu /&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;th&gt;MeshCMS Menu:&lt;/th&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;cms:adminmenu separator="&lt;br /&gt;" /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
    &lt;td&gt;&lt;table border="0" cellspacing="0" cellpadding="5"&gt;
      &lt;tr&gt;&lt;td&gt;&lt;cms:breadcrumbs /&gt;&lt;/td&gt;&lt;/tr&gt;
      &lt;tr&gt;&lt;td&gt;&lt;cms:pagebody /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr align="center"&gt;
    &lt;td colspan="2" bgcolor="#DDBC00"&gt;
      Powered by &lt;a href="http://www.cromoteca.com/meshcms/"&gt;MeshCMS&lt;/a&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
<span class="bold"><strong>&lt;/cms:editor&gt;</strong></span>&lt;/body&gt;

&lt;/html&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_mail_form"></a>2.&nbsp;Create a Mail Form</h2></div></div></div><p>The WYSIWYG editor does not allow to create mail forms. To fill this gap, MeshCMS provides two ways to add a mail form to a page. In both cases, messages sent through that form will be delivered to an address you specify (which will not be visible to anyone, since it's not displayed in the page and not included in its source code).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>you can't put more than one mail form in a page. If you put more, they will render correctly, but only the last one will work as expected.</p></div><p>The two methods are:</p><div class="orderedlist"><ol type="1"><li><p>you can specify an e-mail address in the "E-mail for comments" field while editing a page. A simple form will be inserted into the page and the address you entered will receive the messages. The form can't be customized, but this method is very easy to apply and will be enough for most situations. To be able to use this method, the page theme must contain the <code class="code">&lt;cms:mailform&gt;</code> tag;</p></li><li><p>a module is available that parses a text file and builds a form based on simple instructions. This method offers more options and will be described in the rest of this page, since it requires to learn the syntax to be used in the text file. To be able to use this method, the page theme must contain at least one configurable <code class="code">&lt;cms:module&gt;</code> tag.</p></li></ol></div><p>To create a form using the second method, you must write a text file following a specific syntax. As a first example, let's create the simplest form you could use (similar to the one provided by the first method):</p><pre class="programlisting">recipient:name@site.com

Name

E-mail
email
sender

Message
text:12

Send
submit</pre><p>Field definition blocks are separated by empty lines. The first line of each block indicates the field name. Let's look at each block separately:</p><div class="orderedlist"><ol type="1"><li><p>the first line specifies the <code class="option">recipient</code> address;</p></li><li><p>"Name" is a text field. This is the default when no other parameters are specified;</p></li><li><p>"E-mail" is a text field that is expected to contain an <code class="option">e-mail</code> address (a check will be executed to verify this condition). Its value will be used as <code class="option">sender</code> address;</p></li><li><p>"Message" and is a text area of <code class="option">12</code> rows;</p></li><li><p>the next element is a <code class="option">submit</code> button whose label is "Send this message".</p></li></ol></div><p>Here's how to add a drop down box:</p><pre class="programlisting">recipient:name@site.com

Name

E-mail
email
sender

<span class="bold"><strong>Topic
options: Information, Support Request, Feedback</strong></span>

Message
text:16

Send Now
submit</pre><p>Other notes:</p><div class="itemizedlist"><ul type="disc"><li><p>the default field type is <code class="option">text</code>;</p></li><li><p>the <code class="option">number</code> field type can be used for fields that require a numeric value;</p></li><li><p>the <code class="option">reset</code> field inserts a reset button. A label can be specified as for the <code class="option">submit</code> button;</p></li><li><p>buttons are inserted at the end of the form, regardless of the field order;</p></li><li><p>the <code class="option">textarea</code> field type is a synonym of <code class="option">text:12</code>;</p></li><li><p>the <code class="option">value</code>: line can be used for all fields of type <code class="option">text</code>, <code class="option">email</code>, <code class="option">number</code> and <code class="option">textarea</code> to provide a default value;</p></li><li><p>the <code class="option">sendername</code> attribute indicates that the field value must be used as name of the sender;</p></li><li><p>the <code class="option">subject</code> attribute indicates that the field value will be the subject of the message;</p></li><li><p>the <code class="option">message</code> attribute will insert the field value "as is", i.e. without specifying the field name;</p></li><li><p>you can't insert a new line while defining a parameter. Each parameter (field name, field type, options, etc.) goes on its own line.</p></li></ul></div><p>A more complex example is shown here:</p><pre class="programlisting">recipient:name@site.com

Note
hidden
value: This is a hidden note

Name
sendername

E-mail
email
sender

Gender
options: male, female

Age
options: less than 13, 13-20, 21-30, 31-40, 41-50, 51-60, more than 60

Subject
subject
value: Hello
required

Message
text:16
required

Send Now
submit

Reset All Fields
reset</pre><p>And here's how it looks in the browser:</p><div class="screenshot"><div class="mediaobject" align="center"><img src="resources/sample_mail_form.png" align="middle"></div></div><p>Finally, this is the default MeshCMS form in English (recipient is not specified since it is added in the page editor):</p><pre class="programlisting">Name
sendername

E-mail
email
sender

Message
textarea
messagebody

Send Now
submit</pre><p>Required fields are shown in bold by default. You can change this by creating a <code class="filename">meshcms.css</code> file in your theme.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edit_page"></a>3.&nbsp;Edit a Page</h2></div></div></div><p>Once you have logged in, you should see some links to edit a page while viewing it. Select "Edit this page" and the wysiwyg editor (<a href="http://tinymce.moxiecode.com/" target="_top">TinyMCE</a>) will show up, along with other fields to edit the page title and the various modules.</p><p>Editing a page shouldn't be that hard. TinyMCE provides a standard interface to write text and format it as desired. It comes with its own help.</p><p>MeshCMS adds the ability to browse for links and images. Just click on the <img src="resources/browse_button.gif"> Browse icon in the image and link popups to access the file manager with all its functions (upload included). The link popup also contains a drop down list with all pages available in the site map to insert links in a moment.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>in some cases, when saving a page you might want to unckeck the "use relative URLs when saving" option, so local links will be saved with the full path. This is useful when saving pages to be included with the include <a href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">module</a>: this option will allow links included in that pages to work regardless of the page in which they will be included.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_new_page"></a>4.&nbsp;Create a New Page</h2></div></div></div><p>In MeshCMS a page is a file. Period. Having said that, there are three ways to add a new page:</p><div class="orderedlist"><ol type="1"><li><p>open the <a href="#file_manager" title="1.&nbsp;File Manager">File Manager</a> and create a new HTML file in the desired place. Please keep in mind how the <a href="#site_map" title="1.&nbsp;The Site Map">site map</a> is created;</p></li><li><p>(much easier) open the <a href="#control_panel" title="Chapter&nbsp;5.&nbsp;Control Panel">Control Panel</a>, then choose <a href="#manage_pages" title="2.&nbsp;Manage Pages">Manage Pages</a>. Choose the <img src="resources/newpage_button.gif"> icon associated to the right page: you will add a child page to that one. A small popup will open. Insert a title for the page (use a short one since it wiil be used to choose a name for the file: you will be able to change it while editing the page). Uncheck <code class="option">Create enclosing folder</code> only if you are absolutely sure that you won't add a child page to the new one in future. Then click on <span><strong class="command">Create</strong></span> and the editor will be opened;</p></li><li><p>(the easiest way) navigate to a page and click on <code class="option">New page</code> or on <code class="option">New child page</code>. You will add a new page at the same level of the current one or a child page respectively. Then continue as above (insert the title and so on).</p></li></ol></div><p>Additionally, you can add (and edit) pages from outside MeshCMS, for example using an FTP client. After doing that, make sure you run <span><strong class="command">Refresh Site Map</strong></span> in the Control Panel so MeshCMS can find your new page(s).</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="control_panel"></a>Chapter&nbsp;5.&nbsp;Control Panel</h2></div></div></div><p>This is the home page of the MeshCMS admin area. It contains icons for the most operations. Icons are shown or hidden according to user's privileges.</p><p>Some of them are very simple: there is a link to the home page, a button to log in or out and a button to refresh the site map. This one is useful when something has been changed from outside MeshCMS (e.g. via FTP or some shell), when you want to empty the cache for some reason, or when you want menus to be re-ordered according to current page hits.</p><p>Other functions are more complex and are described in separate sections.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="file_manager"></a>1.&nbsp;File Manager</h2></div></div></div><p>The MeshCMS file manager is a web-based version of the file manager you probably use daily on your computer. It allows to manage the file system of your website.</p><p>The look &amp; feel of the file manager window should be familiar to everyone. On the left there is the folder tree, while the contents of the currently opened folder are shown on the right. There you can select some items and choose an action from the menu at the top of the window.</p><p>Most of the menu items are easy to understand. Probably the <span class="property">Themes</span> menu is the most &#8220;<span class="quote">obscure</span>&#8221;, in fact it is rarely used. This menu allows to specify what theme should be applied to a page or folder. Normally it's easier to apply themes using the <a href="#manage_pages" title="2.&nbsp;Manage Pages">Manage Pages</a> feature of the Control Panel, but using the file manager you can apply themes even to files not included in the site map. Simply select the desired items and then pick a theme for them. If you choose <code class="option">Don't Specify</code>, the theme will be inherited from the parent folder (this is the default for all items that don't have an associated theme, in fact if you only select a theme for the home page, all other pages will use it). If you choose <code class="option">No Theme</code>, nothing will be applied to that file, which will be shown "as is".</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="upload"></a>1.1.&nbsp;Upload</h3></div></div></div><p>The upload tool is essential, since it is used to add new files. You can upload one file at a time, so if you need to upload many files, you better create a ZIP archive, upload it and finally <a href="#unzip" title="1.2.&nbsp;Unzip">unzip</a> it.</p><p>To upload a file, navigate to the desired folder and select <span><strong class="command">Upload</strong></span> from the <code class="option">Tools</code> menu. Then select the file from your computer and start uploading.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>a file with the same name will be overwritten without confirmation.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="unzip"></a>1.2.&nbsp;Unzip</h3></div></div></div><p>You can unpack a ZIP archive from within the file manager. It will be unpacked in the same folder or in a subfolder, so make sure to put it in the right place before unzipping (you can always move the unpacked items later).</p><p>Select the ZIP file (it can have any extension) and choose <span><strong class="command">Unzip</strong></span> from the <code class="option">Tools</code> menu. You'll see a list of the files that are packed into the archive. If you prefer, you can check the flag to unzip the files in a new folder and edit its name. Note that many archives already put all files in a folder: you can verify if this is the case by looking at the list of files.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>this operation is quite dangerous, since it will overwrite files if needed, without backing them up. So it is highly recommended to unzip files in a new folder as described above.</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="manage_pages"></a>2.&nbsp;Manage Pages</h2></div></div></div><p>Here the site map is shown in a convenient way and some actions are available for each page. The table has these columns:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Page title</strong></span>: shows the title of the page, preceded by an icon that allows to show/hide children pages (if any).</p></li><li><p><span class="bold"><strong>Hits</strong></span>: a count of the page hits in the last days. This is not serious statistics, but since this count is stored to be used when sorting pages, it is shown here to have a rough idea of how much a page is being visited.</p></li><li><p><span class="bold"><strong>Cache</strong></span>: indicates if the page is currently available in the page cache.</p></li><li><p><span class="bold"><strong>Menu Caption</strong></span>: the name of the page in the navigation menus, breadcrumbs and links. If the field is empty, the page title will be used instead.</p></li><li><p><span class="bold"><strong>Theme</strong></span>: the theme used for the page. If the field is empty, the theme of the parent will be used. If <code class="option">no theme</code> is selected, the page will be shown "as is".</p></li><li><p><span class="bold"><strong>Score</strong></span>: a number that indicates the &#8220;<span class="quote">importance</span>&#8221; of the page. This value is used to sort pages in menus. Pages with the same score are sorted according to their hits. If the score is not specified, its value is zero, so you can use a negative value to put pages at the end of the list.</p></li><li><p><span class="bold"><strong>Actions</strong></span>: icons to create a new child page or delete a page. Not all pages can have children pages (see <a href="#site_map" title="1.&nbsp;The Site Map">Section&nbsp;1, &#8220;The Site Map&#8221;</a> to know why). Pages with children cannot be deleted, although you can always use the file manager to delete them anyway.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="edit_profile"></a>3.&nbsp;Edit Profile</h2></div></div></div><p>The purpose of this page is simple: you can change your password and edit your profile. Details are optional. The e-mail is optional too, but is located between the required elements since there's the plan to add a simple message board in future.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="new_user"></a>4.&nbsp;New User</h2></div></div></div><p>To create a new user, you need to specify these info:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>username</strong></span>;</p></li><li><p><span class="bold"><strong>user type</strong></span>: <code class="option">Administrator</code> has all privileges, <code class="option">Editor</code> can edit pages but can't do admin stuff and <code class="option">Member</code> can browse files and not much more (in fact it is rarely used);</p></li><li><p><span class="bold"><strong>home folder</strong></span>: the folder in which the user can edit files</p></li><li><p><span class="bold"><strong>password</strong></span>: an initial password that can be changed later by the user himself</p></li></ul></div><p>All other details are optional.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configure"></a>5.&nbsp;Configure</h2></div></div></div><p>The configure page is available to administrators only. Editable options are:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Themes</strong></span>: the path to the folder that contains themes. Usually you won't need to change it, unless you need to use the default folder for another purpose. Please note that changing this parameter won't move the theme files: you must do that using the <a href="#file_manager" title="1.&nbsp;File Manager">file manager</a>.</p></li><li><p><span class="bold"><strong>Module templates</strong></span>: the path to the folder that contains custom module templates. Same considerations as above.</p></li><li><p><span class="bold"><strong>Visually editable types</strong></span>: a comma-separated list of file types that can be edited using the wysiwyg editor.</p></li><li><p><span class="bold"><strong>Help URL</strong></span>: the base URL for help pages. If you want, you can mirror the help locally (for example using wget) and then change the base URL to your one.</p></li><li><p><span class="bold"><strong>Use system theme</strong></span>: if this option is selected, the default system theme will be used for the control panel and for all other administrative pages. While it is preferable to use the same theme as the rest of the site, it is recommended to turn this option on while editing themes, so admin pages are always available without errors.</p></li><li><p><span class="bold"><strong>Prevent hotlinking</strong></span>: if selected, others are not allowed to link to your images and files directly: they must link to pages on your site. A simple window will be shown to state that the file comes from your site.</p></li><li><p><span class="bold"><strong>SMTP Server</strong></span>: the server used to send e-mail messages when a visitor compiles a mail form. You must specify its name; username and password are required only if the server uses SMTP authentication.</p></li><li><p><span class="bold"><strong>Page cache</strong></span>: used to activate the page caching. This is highly recommended since the "decoration" of a page is a quite expensive task. If you have much memory (or few pages), you can store cached pages in memory, otherwise save them on disk. Pages are saved in GZIP format and are sent compressed when the browser supports that (always true with modern browsers).</p></li><li><p><span class="bold"><strong>Site map update interval (hours)</strong></span>: the validity of the site map. After the specified amount of hours, the site map is recreated and the page cache is emptied.</p></li><li><p><span class="bold"><strong>Backup life (days)</strong></span>: the validity of backup files. Those files are stored in the repository. While there is no interface to manage them at the moment, they are still available in the file system so a deleted file can be recovered in case of mistake using an FTP client or some other shell.</p></li><li><p><span class="bold"><strong>Hits counting period (days)</strong></span>: page hits are counted for some days to allow to sort pages when no other criteria is available. If you change this value, the new one will be used after a restart of the web application.</p></li><li><p><span class="bold"><strong>Preferred charset</strong></span>: a charset to be used whenever possible, for example when creating pages or when serving files that do not specify a charset. It is <span class="bold"><strong>highly recommended</strong></span> that you keep the default, that matches the encoding used by the underlying platform.</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="modules"></a>Chapter&nbsp;6.&nbsp;Modules</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="standard_modules"></a>1.&nbsp;Standard Modules</h2></div></div></div><p>A web page is not just a block of text. Many pages on the web perform some common tasks: image galleries, mail forms, news and so on. While one can just write down those pages each time, it is clear that some automation is possible in those cases. The MeshCMS answer to this demand is the concept of <em class="firstterm">module</em>. A module is a box in a page, whose content is created by a <em class="firstterm">module template</em>. In most cases, the module template is applied to a folder or to a file. That folder/file is called <em class="firstterm">module argument</em>. If it is not specified, modules behave differently: some can default to the folder that contains the page, while others will do nothing.</p><p>When you edit a page, you will have the chance to configure as many modules as the page theme specifies. Normally all themes should contain a module at least. When editing a module, choose a module template from the dropdown list, then specify an argument if needed.</p><p>MeshCMS provides some module templates, and others can be created by everyone that is able to write a JSP page. Here's a table of standard templates:</p><div class="table"><a name="d0e1108"></a><p class="title"><b>Table&nbsp;6.1.&nbsp;MeshCMS Standard Module Templates</b></p><table summary="MeshCMS Standard Module Templates" border="1"><colgroup><col width="25%"><col width="25%"><col width="25%"><col width="25%"></colgroup><thead><tr><th>Module Template</th><th>Purpose</th><th>Action</th><th>Behavior Without Argument</th></tr></thead><tbody><tr><td><code class="classname">downloads</code></td><td>Creation of a list of downloads</td><td>Provides a link for each file in the argument</td><td>Does nothing</td></tr><tr><td><code class="classname">gallery</code></td><td>Creation of an image gallery</td><td>Shows a thumbnail with a link for each image file in the argument</td><td>Uses the folder that contains the page</td></tr><tr><td><code class="classname">include</code></td><td>Inclusion of files in the page</td><td>Shows the title and body of each page file in the argument</td><td>Does nothing</td></tr><tr><td><code class="classname">include_as_text</code></td><td>Inclusion of files in the page</td><td>Includes each file as plain text</td><td>Does nothing</td></tr><tr><td><code class="classname">list_pages</code></td><td>Creation of a list of links</td><td>Shows a link for each page file in the argument</td><td>Uses the folder that contains the page</td></tr><tr><td><code class="classname">mail</code></td><td>Creation of a mail form</td><td>Shows a mail form according to the information contained in the argument, which must be a file used as form descriptor</td><td><span class="emphasis"><em>Please always specify a form descriptor</em></span></td></tr><tr><td><code class="classname">parse</code></td><td>Inclusion of dynamic files</td><td>Includes all files in the argument using the pageContext.include() method. This module template is intended for advanced users</td><td>Does nothing</td></tr><tr><td><code class="classname">site_map</code></td><td>Creation of a site map</td><td>Creates a site map starting from the argument path</td><td>Starts from the folder that contains the page</td></tr></tbody></table></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="tag_library"></a>Chapter&nbsp;7.&nbsp;Tag Library</h2></div></div></div><p>MeshCMS provides a library of custom tags to ease the creation of themes. Some are mandatory, others can be useful in many situations. The following sections explain each tag separately. As an example, the <code class="code">&lt;cms:tagname&gt;</code> form is used, which implies the following declaration at the beginning of the theme file:</p><pre class="programlisting">&lt;%@ taglib uri="meshcms-taglib" prefix="cms" %&gt;</pre><p>Mandatory tags are: <a href="#tag_editor" title="1.&nbsp;<cms:editor&gt;">&lt;cms:editor&gt;</a>, <a href="#tag_pagehead" title="2.&nbsp;<cms:pagehead&gt;">&lt;cms:pagehead&gt;</a> and <a href="#tag_pagebody" title="3.&nbsp;<cms:pagebody&gt;">&lt;cms:pagebody&gt;</a>.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_editor"></a>1.&nbsp;&lt;cms:editor&gt;</h2></div></div></div><p>This tag is <span class="emphasis"><em>mandatory</em></span> and must enclose all tags of type <code class="code">&lt;cms:pagebody&gt;</code>, <code class="code">&lt;cms:module&gt;</code> and <code class="code">&lt;cms:mailform&gt;</code> in the theme file. Since these three tags are always used inside the HTML <code class="code">&lt;body&gt;</code> tag, usually the <code class="code">&lt;cms:editor&gt;</code> is inserted immediately after the <code class="code">&lt;body&gt;</code>:</p><pre class="programlisting">&lt;html&gt;
...
&lt;body&gt;&lt;cms:editor&gt;
... body content...
&lt;/cms:editor&gt;&lt;/body&gt;
&lt;/html&gt;</pre><p>The purpose of this tag is to insert a <code class="code">&lt;form&gt;</code> element when the page is being edited. For that reason, you must also enclose any other <code class="code">&lt;form&gt;</code> tag into a <code class="code">&lt;cms:ifnotediting&gt;</code> tag, so your forms won't be shown during page editing (HTML does not allow nested forms).</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_pagehead"></a>2.&nbsp;&lt;cms:pagehead&gt;</h2></div></div></div><p>Inserts some headers found in the page. This tag is <span class="emphasis"><em>mandatory</em></span> since it is needed when editing pages. This tag has no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_pagebody"></a>3.&nbsp;&lt;cms:pagebody&gt;</h2></div></div></div><p>Inserts the body of the page. This tag is <span class="emphasis"><em>mandatory</em></span> since it is needed when editing pages (it makes no sense to have a theme that does not show the contents of the page anyway). This tag has no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_pagetitle"></a>4.&nbsp;&lt;cms:pagetitle&gt;</h2></div></div></div><p>This tag prints the title of the page. It has one attribute:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>default</code></em>: default title to be used when the page has no title. This attribute is optional and its default value is <code class="code">&amp;nbsp;</code>.</p></li></ul></div><div class="example"><a name="d0e1294"></a><p class="title"><b>Example&nbsp;7.1.&nbsp;A simple title</b></p><pre class="programlisting">&lt;title&gt;My Site: &lt;cms:pagetitle /&gt;&lt;/title&gt;</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>the use of <code class="code">&lt;cms:pagetitle&gt;</code> is not limited to the HTML <code class="code">&lt;title&gt;</code> tag: you can use it elsewhere to repeat the title of the page, and you can use anything else within the HTML <code class="code">&lt;title&gt;</code> tag.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_breadcrumbs"></a>5.&nbsp;&lt;cms:breadcrumbs&gt;</h2></div></div></div><p>Creates a list of titles/links for all the pages from the site root (included) to the current page (can be excluded). Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>separator</code></em>: the text between elements (default is a space);</p></li><li><p><em class="parameter"><code>mode</code></em>: the type of breadcrumbs. Possible values are <code class="option">titles</code> (default) and <code class="option">links</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default is no style);</p></li><li><p><em class="parameter"><code>target</code></em>: the target for links (default is no target, hence same window);</p></li><li><p><em class="parameter"><code>current</code></em>: boolean value to include/exclude the current page (default is <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the first element. It won't be added if there are no elements at all;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the last element. It won't be added if there are no elements at all.</p></li></ul></div><div class="example"><a name="d0e1361"></a><p class="title"><b>Example&nbsp;7.2.&nbsp;The most common breadcrumbs</b></p><pre class="programlisting">&lt;cms:breadcrumbs mode="links" pre="You are viewing: " separator=" &amp;raquo; " /&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_defaultcss"></a>6.&nbsp;&lt;cms:defaultcss&gt;</h2></div></div></div><p>Creates a link to the default style sheets for that page and for the additional. You can use it (recommended) or import/link styles as usual. This tag has no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_contextpath"></a>7.&nbsp;&lt;cms:contextpath&gt;</h2></div></div></div><p>Inserts the context path, i.e. the value of <code class="code">HttpServletRequest.getContextPath()</code>. Useful for absolute paths, since the context path might be added when the web application context is not root in its host. This tag has no attributes.</p><div class="example"><a name="d0e1379"></a><p class="title"><b>Example&nbsp;7.3.&nbsp;An absolute link</b></p><pre class="programlisting">&lt;a href="&lt;cms:contextpath /&gt;/dir/page.html"&gt;An absolute link&lt;/a&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_themepath"></a>8.&nbsp;&lt;cms:themepath&gt;</h2></div></div></div><p>Inserts the complete path of the folder that contains the current theme. Very useful to insert files of the theme itself. This tag has no attributes.</p><div class="example"><a name="d0e1389"></a><p class="title"><b>Example&nbsp;7.4.&nbsp;Insert an image located in the theme folder</b></p><pre class="programlisting">&lt;img src="&lt;cms:themepath /&gt;/logo.jpg"&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_adminmenu"></a>9.&nbsp;&lt;cms:adminmenu&gt;</h2></div></div></div><p>This tag inserts a menu to access some specific MeshCMS functions when the user has logged in:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="bold"><strong>Control Panel</strong></span>: a link to the Control Panel;</p></li><li><p><span class="bold"><strong>Edit this page</strong></span>: a link to edit the current page visually;</p></li><li><p><span class="bold"><strong>Edit source</strong></span>: a link to edit the source of the current page;</p></li><li><p><span class="bold"><strong>New page</strong></span>: a link to create a new page at the same level of the current one;</p></li><li><p><span class="bold"><strong>New child page</strong></span>: a link to create a new child page.</p></li></ul></div><p>Some links won't appear if they are not appropriate. If no user has logged in, the behavior depends on the mode attribute. You should always use this tag in a theme, since it offers the most comfortable way to edit pages.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>mode</code></em>: what to display before a user has logged in. There are 2 possible values: <code class="option">normal</code> (default) displays a link to the login page and <code class="option">hidden</code> shows nothing.</p></li><li><p><em class="parameter"><code>separator</code></em>: the text between elements (default is a space);</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default is no style).</p></li></ul></div><div class="example"><a name="d0e1451"></a><p class="title"><b>Example&nbsp;7.5.&nbsp;A vertical admin menu</b></p><pre class="programlisting">&lt;cms:adminmenu separator="&lt;br /&gt;" /&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_simplemenu"></a>10.&nbsp;&lt;cms:simplemenu&gt;</h2></div></div></div><p>Creates a simple textual menu, similar to a typical CMS menu (first level + path to current level + current level).</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>path</code></em>: the path used as root for the menu. Default is the root of the site;</p></li><li><p><em class="parameter"><code>space</code></em>: the number of pixels used to indent the menu. Default is <code class="option">8</code>;</p></li><li><p><em class="parameter"><code>bullet</code></em>: the HTML code used as bullet in the menu. Default is <code class="option">&amp;middot;</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for menu elements (default is no style);</p></li><li><p><em class="parameter"><code>expand</code></em>: set <code class="option">this</code> to true to expand the intermediate levels of the menu (by default it is <code class="option">false</code> and only expands the first and last levels).</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_tigramenu"></a>11.&nbsp;&lt;cms:tigramenu&gt;</h2></div></div></div><p>Creates a JavaScript menu (using <a href="http://www.softcomplex.com/products/tigra_menu/" target="_top">this free script</a>). This script needs to insert some code in the head tag and some in the body tag, so you must call this tag twice in the same page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>part</code></em>: the part of code. Possible values are <code class="option">head</code> and <code class="option">body</code>. You must use both values (the former within the head tag, the latter within the body tag);</p></li><li><p><em class="parameter"><code>path</code></em>: the path used as root for the menu. Default is the root of the site. Use this attribute when <em class="parameter"><code>part</code></em> has the <code class="option">head</code> value;</p></li><li><p><em class="parameter"><code>placeholder</code></em>: a boolean value to include a transparent image with the size of the menu. This is useful when the layout of the page does not use absolute positioning as the script does. Default is <code class="option">false</code>. Use this attribute olny when <em class="parameter"><code>part</code></em> has the <code class="option">body</code> value.</p></li></ul></div><p>If you use this tag in a theme, you must include the files <code class="filename">menu.js</code>, <code class="filename">menu_tpl.js</code> and <code class="filename">menu.css</code> in the same folder of the <code class="filename">main.jsp</code> theme file. <code class="filename">menu_tpl.js</code> and <code class="filename">menu.css</code> can be customized to get the desired result, as videly illustrated in the documentation of the script.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_links"></a>12.&nbsp;&lt;cms:links&gt;</h2></div></div></div><p>Creates a list of links to pages in the same level (i.e. folder).</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>separator</code></em>: the text between elements (default is a space);</p></li><li><p><em class="parameter"><code>style</code></em>: a css style for links (default is no style);</p></li><li><p><em class="parameter"><code>target</code></em>: the target for links (default is no target, hence same window);</p></li><li><p><em class="parameter"><code>current</code></em>: boolean value to include/exclude the current page (default is <code class="option">true</code>);</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the first element. It won't be added if there are no elements at all;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the last element. It won't be added if there are no elements at all.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_module"></a>13.&nbsp;&lt;cms:module&gt;</h2></div></div></div><p>This tag allows to include a <a href="#modules" title="Chapter&nbsp;6.&nbsp;Modules">module</a> in the place where it is located in the page.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>name</code></em>: the description of the module content, in the form <code class="option">template:argument</code>. The template can be omitted: in this case the colon can be omitted too, and the Include template will be used. The fact that this attribute is called name can be misleading: it is a heritage of a previous version;</p></li><li><p><em class="parameter"><code>date</code></em>: the format of the date. This is passed to the include template and might be used or not (for example <code class="classname">Include</code> uses it). Possible values are <code class="option">none</code> (default), <code class="option">normal</code> and <code class="option">full</code>;</p></li><li><p><em class="parameter"><code>style</code></em>: a css style. This is passed to the include template and might be used or not (for example <code class="classname">Include</code> uses it). Default is no style;</p></li><li><p><em class="parameter"><code>location</code></em> (required): the name of the module location. <span class="emphasis"><em>All modules in a theme must have different location names</em></span>;</p></li><li><p><em class="parameter"><code>alt</code></em>: a string that is inserted when the module is not used (default <code class="option">&amp;nbsp;</code>).</p></li></ul></div><div class="example"><a name="d0e1669"></a><p class="title"><b>Example&nbsp;7.6.&nbsp;A fixed module that includes some files located in the <code class="filename">/include/news</code> folder</b></p><pre class="programlisting">&lt;cms:module location="news" name="includes/news" date="normal" style="news" /&gt;</pre></div><div class="example"><a name="d0e1677"></a><p class="title"><b>Example&nbsp;7.7.&nbsp;A module that can be configured while editing the page</b></p><pre class="programlisting">&lt;cms:module location="afterbody" /&gt;</pre></div><div class="example"><a name="d0e1682"></a><p class="title"><b>Example&nbsp;7.8.&nbsp;A module that shows a site map starting from the folder of the page, using <code class="code">(none)</code> to pass an empty argument:</b></p><pre class="programlisting">&lt;cms:module location="sitemap" name="site_map:(none)" /&gt;</pre></div><p>A note about locations: suppose to edit some pages using a theme that contains two configurable modules, whose locations are left and afterbody. Modules will be saved in the page with those location names. If you change theme, those modules will appear if the new theme contains configurable modules with the same location names. So it suggested to use common names for module locations. This is a possible convention:</p><div class="itemizedlist"><ul type="disc"><li><p><code class="option">left</code> for a module in the left column;</p></li><li><p><code class="option">right</code> for a module in the right column;</p></li><li><p><code class="option">top</code> for a module at the top of the page;</p></li><li><p><code class="option">afterbody</code> for a module after the page body;</p></li><li><p><code class="option">bottom</code> for a module at the bottom of the page;</p></li><li><p>numbers for modules below others (<code class="option">left2</code>, <code class="option">right2</code>, etc.)</p></li></ul></div><p>Usually a theme will contain 1, 2 or 3 modules, but there's no limit to their number.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_mailform"></a>14.&nbsp;&lt;cms:mailform&gt;</h2></div></div></div><p>Creates a standard form to send e-mail messages. This can be used to receive a feedback from visitors. The form will only appear in pages that have a recipient specified (it can be set when editing the page). This tag has no attributes.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_lastmodified"></a>15.&nbsp;&lt;cms:lastmodified&gt;</h2></div></div></div><p>Writes the date of the last modification of the current file.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>date</code></em>: the format of the date. Possible values are <code class="option">normal</code> (default) and <code class="option">full</code>;</p></li><li><p><em class="parameter"><code>mode</code></em>: since usually it makes no sense to use this tag for server-side pages (e.g. JSPs), you can set this attribute to <code class="option">static</code> (default) to show the date for static files only, or you can use <code class="option">all</code> to always show it;</p></li><li><p><em class="parameter"><code>pre</code></em>: a text to be added before the date. It won't be added if the date is not shown;</p></li><li><p><em class="parameter"><code>post</code></em>: a text to be added after the date. It won't be added if the date is not shown.</p></li></ul></div><p>Please note that the last modification date refers to the file of the page and does not reflects the dates of other files included through modules.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_user"></a>16.&nbsp;&lt;cms:user&gt;</h2></div></div></div><p>This tag shows some info about the current user.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>id</code></em>: indicates which user information must be shown. Value can be <code class="option">username</code>, <code class="option">e-mail</code> (or <code class="option">email</code>), or another user detail (<code class="option">salutation</code>, <code class="option">name</code>, <code class="option">surname</code>, <code class="option">company</code>, <code class="option">address</code>, <code class="option">zip</code>, <code class="option">city</code>, <code class="option">state</code>, <code class="option">country</code>, <code class="option">phone_number</code>, <code class="option">fax_number</code>, <code class="option">mobile_phone_number</code>). If id is not specified, the value displayed depends on what information is available.</p></li></ul></div><div class="example"><a name="d0e1834"></a><p class="title"><b>Example&nbsp;7.9.&nbsp;Welcoming a user when he has logged in</b></p><pre class="programlisting">&lt;cms:ifuser&gt;Welcome &lt;cms:user /&gt;!&lt;/cms:ifuser&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_ifuser"></a>17.&nbsp;&lt;cms:ifuser&gt;, &lt;cms:ifnotuser&gt;</h2></div></div></div><p>These tags mark a part of the page that must be shown only when a user has logged in or not.</p><p>These tags have no attributes.</p><div class="example"><a name="d0e1846"></a><p class="title"><b>Example&nbsp;7.10.&nbsp;Displaying a message to a user</b></p><pre class="programlisting">&lt;cms:ifuser&gt;Welcome &lt;cms:user /&gt;!&lt;/cms:ifuser&gt;
&lt;cms:ifnotuser&gt;You are not logged in&lt;/cms:ifnotuser&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_ifediting"></a>18.&nbsp;&lt;cms:ifediting&gt;, &lt;cms:ifnotediting&gt;</h2></div></div></div><p>These tags are used to mark a part of the page that must be shown only when editing or viewing a page.</p><p>These tags have no attributes.</p><p>The <code class="code">&lt;cms:ifnotediting&gt;</code> tag is mainly used to enclose forms that would otherwise conflict with the main editing form.</p><div class="example"><a name="d0e1863"></a><p class="title"><b>Example&nbsp;7.11.&nbsp;Inserting a search form without conflicting with the MeshCMS editor</b></p><pre class="programlisting">&lt;cms:ifnotediting&gt;
 &lt;!-- Search Google --&gt;
  &lt;center&gt;
   &lt;FORM method=GET action="http://www.google.com/search"&gt;
    &lt;input type=hidden name=ie value=UTF-8&gt;
    &lt;input type=hidden name=oe value=UTF-8&gt;
    &lt;TABLE bgcolor="#FFFFFF"&gt;&lt;tr&gt;&lt;td&gt;
     &lt;A HREF="http://www.google.com/"&gt;
     &lt;IMG SRC="http://www.google.com/logos/Logo_40wht.gif" 
      border="0" ALT="Google" align="absmiddle"&gt;&lt;/A&gt;
     &lt;INPUT TYPE=text name=q size=25 maxlength=255 value=""&gt;
     &lt;INPUT type=submit name=btnG VALUE="Google Search"&gt;
    &lt;/td&gt;&lt;/tr&gt;&lt;/TABLE&gt;
   &lt;/FORM&gt;
  &lt;/center&gt;
 &lt;!-- Search Google --&gt;
&lt;/cms:ifnotediting&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_ifmodule"></a>19.&nbsp;&lt;cms:ifmodule&gt;, &lt;cms:ifnotmodule&gt;</h2></div></div></div><p>These tags are used to display a part of the page only when the specified module is active or not.</p><p>Attributes:</p><div class="itemizedlist"><ul type="disc"><li><p><em class="parameter"><code>location</code></em> (required): the name of the module location.</p></li></ul></div><div class="example"><a name="d0e1881"></a><p class="title"><b>Example&nbsp;7.12.&nbsp;Adding some HTML around a module</b></p><pre class="programlisting">&lt;cms:ifmodule location="afterbody"&gt;
 &lt;div align="center"&gt;Module title&lt;/div&gt;
 &lt;cms:module location="afterbody" /&gt;
 &lt;div align="center"&gt;End of module&lt;/div&gt;
&lt;/cms:ifmodule&gt;</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tag_ifmailform"></a>20.&nbsp;&lt;cms:ifmailform&gt;, &lt;cms:ifnotmailform&gt;</h2></div></div></div><p>These tags are used to display a part of the page only if a recipient has been specified to receive messages from that page.</p><p>These tags have no attributes:</p><div class="example"><a name="d0e1893"></a><p class="title"><b>Example&nbsp;7.13.&nbsp;Adding some HTML around a mail form</b></p><pre class="programlisting">&lt;cms:ifmailform&gt;
 &lt;div align="center"&gt;Send a message&lt;/div&gt;
 &lt;cms:mailform /&gt;
&lt;/cms:ifmailform&gt;</pre></div></div></div></div></body></html>